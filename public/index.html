<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="计算机 比特币 互联网金融 IFWallet" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="区块链爱好者，互联网从业者">
<meta name="keywords" content="bibodeng, blockchain, bitcoin, bitcoin cash, life, programmer">
<meta property="og:type" content="website">
<meta property="og:title" content="bibodeng">
<meta property="og:url" content="https://bibodeng.github.io/index.html">
<meta property="og:site_name" content="bibodeng">
<meta property="og:description" content="区块链爱好者，互联网从业者">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="bibodeng">
<meta name="twitter:description" content="区块链爱好者，互联网从业者">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> bibodeng </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">bibodeng</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Think By My Mind</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/12/02/产品设计从复杂到简单/" itemprop="url">
                  产品设计从复杂到简单
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-12-02T08:31:00+08:00" content="2018-12-02">
              2018-12-02
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/12/02/产品设计从复杂到简单/" class="leancloud_visitors" data-flag-title="产品设计从复杂到简单">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>产品的简单与复杂</p>
<p>前几天，我们一个用户反馈，有个展示BCH收款地址的页面非常复杂，根本很难搞懂应该怎么用。这个页面含有了3个功能:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 呈现可以设置金额的BIP21二维码</span><br><span class="line">2. BCH地址的新老格式切换</span><br><span class="line">3. BIP21协议格式和纯地址的切换。</span><br></pre></td></tr></table></figure>
<p>在设计之初，我们的本意是用户可以使用高级功能，如果不想使用默认不变就可以了。然而在实现的过程中，虽然我的思路很清晰，但是工程师也一直搞混，解释了很多遍。从这里，其实就可以看到这个功能偏复杂了。实际上，用户根本不会用BIP21来收款，而且很多钱包并不支持，故而用的最多的都是纯地址格式，而且是老的纯地址格式，他们更加不会知道BIP21是什么，也不想知道。</p>
<p>这也给了我一个小警示，在设计一个功能之初，千万不能想当然，应该通过多试验、多调查，设计出一个最能解决用户痛点的简单方案。这里有两个着重点，一是要解决用户的痛点，例如设置金额就不是什么痛点，因为可有可无，而扫不出正确的地址，这是痛点，而且可能会影响使用，故而这个的重要性要摆在设置金额前面；二是这个方案要足够的简单，以为如果不简单，用户不知道如何使用，开发起来也费劲，最终得到的效果还不好。如果有什么方法，使用后，能够使得很多问题变得不存在，那么这个方法就是：砍掉不必要的功能。</p>
<p>以前对这点体验不是那么深刻，故而没有留意更多。这样的产品故事里，遥控器那个故事应该是最耳熟能详的。以前的遥控器，非常复杂，几十个按键，每个按键还不好按，但是到了智能电视时代的遥控器，都仅有几个按钮，而且还十分方便。这样的产品体验升级虽然有一部分是技术进步的原因，但是主要还是因为这种”简单即美”的设计理念。当时设计苹果鼠标的时候，乔布斯坚持它只有一个按键，设计iPhone的时候，坚持它只有一个home键，就像爱因斯坦所说的那样，足够简单，但不过分简单。现在的苹果产品，有点过于为了简单而简单，实际上搞得更复杂，这是题外话了。</p>
<p>另外一个我印象深刻的例子，就是电动牙刷。前段时间我给自己买了一个小米的素士牙刷，先不谈刷牙功效如何，它竟然有四个档位，要停下来有两种方式：一种是长按，另外一种是短按逐次变档，直至停止。有时候觉得这种交互非常讨厌，产品设计师肯定没怎么用过自己设计的牙刷。因为人把电动的东西塞嘴里，本来就有一种恐惧，停止操作要越快越好，而这种逐次换档和长按短按的体验，并不好，因为这会让用户思考。而我之前用的一款Oral-B的电动牙刷，只有一个按键，那就是开关，根本不用去想，用着也舒服。</p>
<p>从这些失误上，我体会到一个产品设计的要旨，那就是：don’t make me think。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/11/24/分叉之殇/" itemprop="url">
                  分叉之殇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-11-24T11:40:16+08:00" content="2018-11-24">
              2018-11-24
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/11/24/分叉之殇/" class="leancloud_visitors" data-flag-title="分叉之殇">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近的BCH分叉，可谓是让加密数字货币用户受尽了伤害，不仅手里的币因为分叉而大跌，而且整个分叉期间，由于重放问题没有彻底解决，所以大部分用户还不能使用BCH。随着这一次的分裂，人们重新审视区块链，加密数字货币的方向在哪里？区块链的价值到底在哪里？</p>
<h2 id="区块链的治理模式"><a href="#区块链的治理模式" class="headerlink" title="区块链的治理模式"></a>区块链的治理模式</h2><p>首先，区块链的世界里，分叉是必然会发送的，而且将来也一直在发生。</p>
<p>区块链里凝聚了大家的共识，所谓共识，就是人们共同的约定，来源于人们的想法，而想法这个东西，必然会存在着分歧，毕竟谁也抑制不了别人心中的想法。区块链里也一样，这一套共识，如果不认同，那么就分叉，也只能分叉。今天，社区可能仍然非常团结，但将来的某一天，假如社区里面产生了不同的声音，而且越吵越烈，最终酿成不可避免的对峙，你将会选择你最认同的那个方向，这将造成分裂。</p>
<p>BCH当时从BTC里面分裂出来，就是因为扩容之争，多年的扩容声音没有得到Core开发组的认同，并且提出了一个走Segwit的路线，双方谈崩，从而导致分裂。2017年8月1日，BCH主动放弃了BTC的名称，引入了FORKID来做重放保护，从而新建立起了一个BCH社区。这个社区里面有着最热衷的数字货币和区块链的粉丝，可谓是真正的“区块链的火种”，一切仿佛回到比特币诞生之后不久的样子。</p>
<p>区块链通过阶段性地硬分叉来进行升级，通过分裂的区块链竞争来解决分歧，其实从根本上来讲，区块链自己解决不了这个分歧。故而区块链的治理，只能通过多方博弈，达成一致，要么就是用真金白银，教对方做人。我们一直都期待着，区块链自己能够解决这些根本分歧，一个方案是，将协议固话，不改了，那么就不会有分裂；另外一种方案是，允许改，但是要加快节奏，这样得到支持多的活下来，循环往复，协议会往最合适的方向进化。</p>
<h2 id="两种不同的信念"><a href="#两种不同的信念" class="headerlink" title="两种不同的信念"></a>两种不同的信念</h2><p>然而，即使看起来团结一致的社区，也不是铁板一块，其中一部分人有着执着的白皮书理念，他们坚信BCH就是要做一个P2P的Cash，这也是比特币现金的使命所在，当时的分裂就是因为BTC引入Segwit，想通过闪电网络去走现金这条路，结果又不符合P2P这一属性，从而背离了这一理念。</p>
<p>比特币的发展过程中，一直都有两种思想，一种思想是人们从中看到了它作为全球数字货币的威力，将给人们带来金钱上的自由，不再承受大国干预、政治黑幕等带来的经济后果，人们使用的是纯粹的货币，现代社会的电子黄金。这是对比特币的经典看法，人们需要这样一个纯粹的货币。</p>
<p>而另外一帮人，他们发现比特币里还蕴含着更广阔的应用，那就是作为价值流通的网络基础。它能够引入更多的参与方，让金钱可以编程，让有用的信息和价值得以流通。可以接入物联网设备，可以作为一个消息队列，向全球的人们广播他们的可信事件。这是互联网之后的一大革命，将有可能连同人工智能、物联网极大改变人类生活，光是想想也的确挺让人激动的。</p>
<p>我相信绝大多BCH社区的人，都会同时有这两种信念，既希望比特币成为世界人民的Money，也希望在其上建立强大的网络和应用。它们不是矛盾的，这两种思想都源于比特币本身，比特币它有货币的性质，同时它内部使用的锁定脚本、解锁脚本，其实就是一段程序，是初始版本的智能合约。ETH的诞生，就是Vitalik想要在区块链上做更多事情，比如执行一段更强大的程序。然而BTC上，不能这么做，或者这么做非常费劲，还得不到Core的支持，所以Vitalik就带领着和他有同样理想的人去新开辟了一个领地，创造了一个图灵完备的智能合约体系，虽然还只能做一些游戏，没有什么很大的实际应用，但是它的诞生也引爆了一些新东西，比如ICO、加密猫等，带来了许多的用户。</p>
<p>事实上，本次分叉，其实没有什么理念上的分歧，吴忌寒是这么想的，想要让世界更多人使用它，就得在上面搭建更多应用。CSW也是同时具有这两种思想，因为我们看到他试图论证比特币的图灵完备，并申请了很多专利，想要在比特币的网络上搭建智能合约系统。这两种信念，将伴随着区块链和区块链从业者，一直走下去，直到系统自己知道如何解决分歧。</p>
<h2 id="此次的分歧"><a href="#此次的分歧" class="headerlink" title="此次的分歧"></a>此次的分歧</h2><p>我作为一个持币人，以及这个生态内的开发者，你要我选，其实我心里也是迷茫的。到底应该信谁呢？一边是意志坚定，理念纯粹的Cash派，一边是努力推进BCH迭代进程的演进派，很难选。</p>
<p>Cash派认为 BCH的基础框架已经搭好了，后来的人不要随意地加些乱七八糟的东西进来，自以为比中本聪还聪明。事实上，比特币发展的早期，中本聪的确说过从0.1版本起，比特币的框架已经定了，需要将它set in stone，剩下的就是在上面实现各种交易类型，逐步提升处理能力，大家可以自行去探索那些潜在应用了。</p>
<p>然而演进派，也有非常可靠的论据，比特币发展了十年之久，除了在Cash上，没有别的很大进展，还只能支持少数几种标准交易，早先人们在OP_RETURN上嵌入数据，尝试着给币染色等等，最终都不了了之，因为做起来太麻烦了，而ETH只需要几行代码。如果说，比特币要证明自己具备这样的能力，那十年的时间都过去了，为什么还没这样的一个东西出来呢？既然你是中本聪，这十年里干嘛去了？（中本聪的确许多年没露面了，最后一次露面说的还是自己在搞别的事情）</p>
<p>分歧到达一个不能调和的阶段，就势必会分裂。于是双方以区块大小为导火索，展开了一轮又一轮的辩论。理念派认为，应当扩容到128MB才能有真正的商业应用，而演进派相对保守，认为目前区块交易就那么点，还有别的事情比区块扩容紧急，好嘛！依我来看，区块大小，大家的长远计划，都是要扩容，扩大到多少为止呢？和现在的32MB相比，扩大到128MB，没有什么实际意义，而且这才扩不久，我们的终极目标都是扩大到没有限制，你有多大本事，就打多大的区块，这也符合中本聪当初的设计。</p>
<p>比特币作为一个基础协议，应该尽可能简洁，并且要灵活，应当去除各种各样的限制，比如区块大小限制、OP_Code限制，这样才能满足未来潜在的需求，比如在上面承载智能合约，在上面运行着大量跟钱相关的程序。</p>
<p>平心而论，双方都有一定的道理，两个方向都保持有一条链在探索，也是很好的，左手Cash，右手应用。然而，双方都没有妥协，因为继承BCH的用户和社区，是最好的结果，如果要另起炉灶，那规模就太小了。事实上，对的方案应当是，应用带来了更多用户，而更多用户，使得BCH成为了Cash。</p>
<h2 id="对人的揣测"><a href="#对人的揣测" class="headerlink" title="对人的揣测"></a>对人的揣测</h2><p>我们都知道，为首的两方，一方是nchain为代表的Cash派，代表人物是CSW，另外一方是比特大陆为代表的演进派，代表人物是Jihan。首先两个都是公司，两个人又都是商人。既然是公司和商人，那么除了有对BCH的信仰，必定有一定的野心，想要从BCH的发展中获利。而且人本身就非常复杂，说的和做的，有可能是不统一的。</p>
<p>进入分叉后，双方就在社交网络上互相攻击，也有人YY了很多的阴谋论，不过大多都只能呵呵一乐。</p>
<p>Jihan是比特大陆的CEO，据说公司和个人都持有很多的BCH，至于为什么要屯BCH，那应该是看好BCH未来能够增值，能够获得收益，这点上BCH用户和BCH生态建设者们都是一样的。至于人们揣测的，比特大陆想要掌控BCH，现在持有大量的币和算力，他们最担心的应该是过于中心化，导致手里的币不值钱，之前忌寒还表示过要从社区里退休。</p>
<p>通过BCH最好的获益方式，就是建设整个生态，一起将蛋糕做大，从中获益，掌控它，只会让它变得不值钱，因为当人们看到它只由少数人说了算的时候，大部分人的自由就没有办法保证了。BCH只是比特大陆生意的一个，也是最看好的一个，比特大陆没有动机去摧毁它，只是想从中赚到钱。如果说想通过一些PoS、收矿工税、把BCH变成ETH等方案，来进一步掌握BCH，这样将会激起非常多人的反对，不过这些提案最终也都被否决了。如此看来，比特大陆整体还是尊重社区意愿的。</p>
<p>而对于CSW，他自己也跳出来说自己是中本聪，之前挺多人都认为他是中本聪，包括许多大佬。因为据说他对于比特币的理解是最深刻的，并且他为人非常狂放，怼了无数的人，看起来是天才的作风。然而也有非常多人质疑他是中本聪，其中包括Vitalik，他不认为CSW是中本聪，如果是这样的话，他将改变对中本聪的看法。</p>
<p>中本聪是什么样的一个人，我们无从知道，不过我们“观其文，想见其人”，每个人都可以从他的一些言行中推测出不同的为人。目前比较可信的一个观点是，CSW是中本聪团队里的一员，至少是早期见证者，发现了比特币的巨大威力，想要凭借比特币获得商业上的成功，因而对比特币了解比较深。他发表的言论，也一直在强调BCH要做money，他要的就是money，如果别人不答应，他宁愿互相伤害。</p>
<p>这里我们做一个思想实验，假设真正的中本聪，他会怎么做？他会不会突然跳出来，胁迫所有人，必须要按他的方案来走？我想，真正的中本聪先生，他早年就放弃掌控社区，推位让“国”，并且销声匿迹，不愿露面，极小可能会这么做。我相信CSW是看到了无限可能，包括全球的money，还有广阔的应用场景（比如票据Tokenized），才会为之执着。但是如果说想坚持，谈不拢分叉出来，不互相攻击也是可以的，毕竟，区块链里就是要容忍不同意见，凝聚共识。</p>
<p>现在的局面，BCH已然分裂成为了BCHABC和BCHSV两条链，两条链之间没有做防重放，互相之间还进行过算力战，使得用户发送交易非常不便，除非钱包做了防重放，稍微会好一些（我们IFWallet就做了）。但是，只有最终区块链主动做了升级，才会将这朵笼罩的乌云驱散。</p>
<h2 id="用户的利益"><a href="#用户的利益" class="headerlink" title="用户的利益"></a>用户的利益</h2><p>现在的局面，BCH分裂已成定局，谁能继承BCH的名字，谁主动出防重放措施，都是争议的焦点。目前继承BCH各项遗产的，比较大的概率是BCHABC，因为大家厌倦了分裂，厌倦了争吵，想要继续BCH的发展。BCH在分裂之前形势向好，许多Token方案出台，许多浏览器、钱包、矿池等基础设施纷纷出现，然而分叉一来，统统都得停下来。</p>
<p>用户也是希望这样的战争尽快结束，否则的话，双方互相砸盘，将手里的币砸到一钱不值，忍受这种巨额的亏损，谁也不能保证自己信仰到底有多坚定。一根阳线，改变信仰，一根阴线，也能改变信仰。所以这场分裂，其实是不符合用户利益的。很不幸，这场分裂没能避免，那么就应当今早结束，恢复用户的使用。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>分裂既然已成现实，那么我们就接受这个现实，两边社区都要各自好好发展，产生更多应用，获得更多用户。我们作为区块链从业者，也希望能够尽量少打这种两败俱伤的战争，应该说是多败俱伤的战争，应该集中有限的精力，去探讨和实现更多的可能，让BCH真正成为很多用户使用的Cash，成为未来的价值互联网基础协议。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/29/粉尘交易的定义与处理/" itemprop="url">
                  粉尘交易的定义与处理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-08-29T08:35:17+08:00" content="2018-08-29">
              2018-08-29
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/08/29/粉尘交易的定义与处理/" class="leancloud_visitors" data-flag-title="粉尘交易的定义与处理">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是粉尘交易？"><a href="#什么是粉尘交易？" class="headerlink" title="什么是粉尘交易？"></a>什么是粉尘交易？</h2><p>什么是粉尘交易，或者说粉尘交易的定义是什么，对于开发者来还是比较重要的。钱包或者交易所等基础设施，如果一不小心构造出一个粉尘交易，是无法广播到网络，被矿工打包的，这样会严重影响到用户体验。另外一方面，粉尘交易也和区块链网络安全息息相关，如果如果网络中充斥着一些微不足道的交易，而矿工们毫无差别地打包交易，那么这些价值小，但是总体体积很大的交易，就会阻碍到其它正常交易的打包确认。粉尘交易也可以看成是区块链网络上DDOS攻击的一种，攻击者通过发送许多这样小金额的交易，来堵塞整个网络。</p>
<p>那么有没有确切的标准来判定一笔交易是不是“粉尘交易”呢？答案是有的。</p>
<p>通过一番搜寻，得到一个普遍的答案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &quot;Dust&quot; is defined in terms of CTransaction::minRelayTxFee, which has</span><br><span class="line"> * units satoshis-per-kilobyte. If you&apos;d pay more than 1/3 in fees to</span><br><span class="line"> * spend something, then we consider it dust. A typical spendable</span><br><span class="line"> * non-segwit txout is 34 bytes big, and will need a CTxIn of at least</span><br><span class="line"> * 148 bytes to spend: so dust is a spendable txout less than</span><br><span class="line"> * 546*minRelayTxFee/1000 (in satoshis). A typical spendable segwit</span><br><span class="line"> * txout is 31 bytes big, and will need a CTxIn of at least 67 bytes to</span><br><span class="line"> * spend: so dust is a spendable txout less than 294*minRelayTxFee/1000</span><br><span class="line"> * (in satoshis).</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
<p>也就是说，在比特币的网络中，如果交易费用高于1/3的交易价值，则被视为粉尘交易，说完了。</p>
<p>常规的来说，一个P2PKH交易，由于其最小体积时为一个输入，一个输出，总共 <code>148 + 34 = 182</code> 字节，而交易手续费是由每个节点配置的minRelayTxFee（比特币中默认为<code>0.00001BTC/KB</code>）决定的，故而手续费就是 <code>182 / 1000 * minRelayTxFee</code>，那么其的3倍即 <code>546 / 1000 * minRelayTxFee</code>，也即默认为 <code>0.00000546 BTC</code>，在BCH网络上也是一样的。</p>
<p>其它类型的交易以此类推，交易中输出金额有低于 <code>体积 * 3 / 1000 * minRelayTxFee</code> 的，即为粉尘交易。</p>
<p>我在BCH的网络上亲自试验了一番，对于P2PKH交易果真是如此，大于等于0.00000546的交易可以发出，而小于0.00000546的交易，则无法发出。</p>
<h2 id="如何避免粉尘交易"><a href="#如何避免粉尘交易" class="headerlink" title="如何避免粉尘交易"></a>如何避免粉尘交易</h2><p>既然知道了粉尘交易的定义，那么我们就可以按照定义，避免构造出粉尘交易了。首先，可以在构造交易的过程中，根据交易的类型，计算出交易的最低金额，同时对每个输出进行判断，如果低于该金额，则不能继续构造该笔交易。特别的，如果这个输出刚好发生在找零上，且金额对于你来说不太大，则可以通过舍弃该部分的粉尘输出，以充作交易手续费来避免构造出粉尘交易。</p>
<h2 id="发展中的问题"><a href="#发展中的问题" class="headerlink" title="发展中的问题"></a>发展中的问题</h2><p>如果一个区块能够容纳的交易数量越来越多，币也变得越来越值钱，即使是1聪也值很多钱，则这个规则有可能被改变。不过，现在的定义非常巧妙，足以支持到足够久远的未来，定义的公式中，所用到的 minRelayTxFee 是由节点决定的，而节点可以将这个值设置的更低，以容纳更低手续费的交易，但是这必须要得到网络中其它成员的认可，才能保证该交易被其它矿工打包。具有交易加速器的矿池，其实就是将这个值设置得足够低，才能打包那些不被网络确认的交易，从而提高交易的虚拟手续费，通过插队的方式，完成确认。如果要在网络中达成一致地修改配置，最好是通过一次硬分叉，大家统一修改，算是对共识的升级。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/29/解密比特币改善提案BIP21/" itemprop="url">
                  解密比特币改善提案BIP21
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-08-29T08:34:26+08:00" content="2018-08-29">
              2018-08-29
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/08/29/解密比特币改善提案BIP21/" class="leancloud_visitors" data-flag-title="解密比特币改善提案BIP21">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="BIP及提案过程"><a href="#BIP及提案过程" class="headerlink" title="BIP及提案过程"></a>BIP及提案过程</h2><p>BIP全称Bitcoin Improvement Proposal，意为比特币改善提案，是人们提出的改进比特币及其应用的一个工具，通过收集各种提案，通过讨论，大家能够推进比特币的发展和改良。有意思的是，BIP的第一个提案，就是关于BIP的详细提案规则。</p>
<p>BIP的提案过程如下：<br><img src="https://en.bitcoin.it/w/images/en/e/ea/BIP_Workflow.png" alt=""></p>
<h2 id="BIP21"><a href="#BIP21" class="headerlink" title="BIP21"></a>BIP21</h2><p>我们今天使用比特币钱包能如此方便，要感谢BIP21，接下来我们详细分析一下BIP21。</p>
<p>这个提案要解决的是比特币应用层（这里指钱包）的一个扫码及链接支付的标准提议。该提议介绍了一种URI的语法，这种URI语法可以使得用户可以通过一个链接来发起一笔交易，交易里面指定了一些参数，如金额、备注等，当然这个链接也可以编码成一个二维码，用户通过钱包扫码，就能理解获得一个支付地址。BIP21使得比特币的支付非常简单和普及，该标准使得可以在众多钱包中相互转账，甚至在页面里面实现点击链接转账。</p>
<p>对于请求支付的人来说，应该按照这个标准来构造这样一个URI，或者是二维码，而对于支付方，则需要能够解析对方给出的URI，把里面的关键信息提取出来，完成后续的转账操作。其实这两个步骤，一般都不需要用户介入，钱包商会搞定一切，最终钱包用起来就像是微信支付一样，非常方便。</p>
<h3 id="BIP32协议内容"><a href="#BIP32协议内容" class="headerlink" title="BIP32协议内容"></a>BIP32协议内容</h3><p>提案提议的格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 协议:地址?参数串</span><br><span class="line">&quot;bitcoin&quot;: bitcoinaddress [ &quot;?&quot; bitcoinparams ]</span><br><span class="line">// 地址为base58编码的字符串</span><br><span class="line">bitcoinaddress = *base58</span><br><span class="line">// 参数串由一个个参数用&amp;连接起来</span><br><span class="line"> bitcoinparams  = bitcoinparam [ &quot;&amp;&quot; bitcoinparams ]</span><br><span class="line">// 参数类型</span><br><span class="line"> bitcoinparam   = [ amountparam / labelparam / messageparam / otherparam / reqparam ]</span><br><span class="line">// amount 参数：amount=数字</span><br><span class="line"> amountparam    = &quot;amount=&quot; *digit [ &quot;.&quot; *digit ]</span><br><span class="line">// label 参数：label=字符串</span><br><span class="line"> labelparam     = &quot;label=&quot; *qchar</span><br><span class="line">// message 参数：message=字符串</span><br><span class="line"> messageparam   = &quot;message=&quot; *qchar</span><br><span class="line">// 其它自定义参数：参数名=参数值</span><br><span class="line"> otherparam     = qchar *qchar [ &quot;=&quot; *qchar ]</span><br><span class="line">// req参数：req-参数名=参数值 req表示是不可缺参数</span><br><span class="line"> reqparam       = &quot;req-&quot; qchar *qchar [ &quot;=&quot; *qchar ]</span><br></pre></td></tr></table></figure>
<p>从上面的定义和注释我们可以看出它和网页URL很相似，也是一个协议，加地址，再带上若干参数。实际上除了双斜杠之外，其它基本是一样的，而且该提案定义了几个参数，如amount/label/message等。</p>
<p>bitcoin协议名可以大写也可以小写，但是各个参数名是大小写敏感的，不能随便更改。</p>
<h3 id="简化版本"><a href="#简化版本" class="headerlink" title="简化版本"></a>简化版本</h3><p>上面的协议其实还是略微复杂难懂，简化版本如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bitcoin:&lt;address&gt;[?amount=&lt;amount&gt;][?label=&lt;label&gt;][?message=&lt;message&gt;]</span><br></pre></td></tr></table></figure></p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>举个例子，bibo请求一个20.3BTC的捐赠：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bitcoin:175tWpb8K1S7NmH4Zx6rewF9WQrcZv245W?amount=20.3&amp;label=bibo&amp;message=donation</span><br></pre></td></tr></table></figure></p>
<p>扫码者，将通过钱包支付给比特币地址<code>175tWpb8K1S7NmH4Zx6rewF9WQrcZv245W</code>一笔<code>20.3 BTC</code>的转账，标记为<code>bibo</code>，备注为<code>donation</code>。</p>
<h3 id="BIP21的若干语言实现："><a href="#BIP21的若干语言实现：" class="headerlink" title="BIP21的若干语言实现："></a>BIP21的若干语言实现：</h3><ul>
<li>Javascript - <a href="https://github.com/bitcoinjs/bip21" target="_blank" rel="noopener">https://github.com/bitcoinjs/bip21</a></li>
<li>Java - <a href="https://github.com/SandroMachado/BitcoinPaymentURI" target="_blank" rel="noopener">https://github.com/SandroMachado/BitcoinPaymentURI</a></li>
<li>Swift - <a href="https://github.com/SandroMachado/BitcoinPaymentURISwift" target="_blank" rel="noopener">https://github.com/SandroMachado/BitcoinPaymentURISwift</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/29/成年人应当这样获取信息/" itemprop="url">
                  成年人应当这样获取信息
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-08-29T08:33:36+08:00" content="2018-08-29">
              2018-08-29
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/08/29/成年人应当这样获取信息/" class="leancloud_visitors" data-flag-title="成年人应当这样获取信息">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="人是一台“电脑”"><a href="#人是一台“电脑”" class="headerlink" title="人是一台“电脑”"></a>人是一台“电脑”</h2><p>假如将人比作一台电脑，需要输入信息，存储数据，运算思考，输出表达。而其中输入信息，作为第一步，也是非常重要的。那么作为一个成年人，应当怎么样去收集信息，才能够尽可能快，尽可能全面呢？</p>
<p>从小到大，其实从来没有人教过我们如何收集信息，而这看起来好像是一个无意识的过程。不就是刷刷微博、看看新闻、读读书、看看文章嘛，大家都会嘛。然而，这种无意识，往往不是最有效的方式，甚至会让你觉得非常苦恼。</p>
<p>我一直在思考这个问题，如何搭建自己的信息收集渠道？因为过去收集信息，没有一个完整的体系，都是无头的苍蝇，乱撞。在浏览信息的时候，还容易因为一些别的话题将注意力分散开，像猴子掰玉米一样，大量的时间花在不断地分心上面，真正关心的信息却没有找到。</p>
<h2 id="结构化思维方法"><a href="#结构化思维方法" class="headerlink" title="结构化思维方法"></a>结构化思维方法</h2><p>首先，在找到答案前，先让我们确立一些原则。作为一个成年人，<strong>应当具备结构化的思维</strong>，这个是我的一个指导原则之一。其实我们遇到的大多数问题，是因为没有结构化思维工具，所以才会不知如何下手，不知道怎么收集信息，不知道怎么思考，不知道怎么做决定，等等。这些问题，统统都是因为没有一个稳定的思维结构，注定会导致过程的混乱和随意，最终得不到一个满意的答案。</p>
<p>结构化思维方法具有很多优势，它将问题拆分成更多维度，之前想到的是一个个零散的点，而结构化思维，让你从一个面、一个体、或者更高维度的视角去分析问题。这种多维度，让你看到事物的很多面，对事情有更加清晰的认识，将会帮助你解决手头的问题。</p>
<p>这个纷繁复杂的世界，就是由很多很多类的事物组成，而每一样事物，都有其规律可循，通过多个维度的观察、总结，那么你就更能掌握了这个规律，从而使得做起事情很轻松。</p>
<h2 id="信息收集的方法论"><a href="#信息收集的方法论" class="headerlink" title="信息收集的方法论"></a>信息收集的方法论</h2><p>信息收集也一样，有它特有的方法论，总结了这种方法论，可以为绝大多数人、绝大多数场景使用。</p>
<h3 id="信息结构模型"><a href="#信息结构模型" class="headerlink" title="信息结构模型"></a>信息结构模型</h3><p>信息包含了几种类型：</p>
<ul>
<li>结构化的核心知识</li>
<li>零散的知识点</li>
<li>即时信息</li>
</ul>
<p>我们的信息组成应当是一个同心圆，核心是一些最重要的结构化知识，这些知识需要艰苦地学习才能获得，成为我们思考和行动的最主要依据。比如从小接受的科学教育，让我们理解这个世界是由粒子组成，再比如，你的工作技能，需要辛苦习得，而且每天都在应用，这是我们每个人吃饭的家伙。</p>
<p>我们的信息结构不断完善的过程，就是新知识不断加入，融汇贯通到已有的结构里面，成为你信息结构的一部分。这个过程也是你的信息圈不断扩大的过程，它看起来就像是下面这样。<br><img src="https://user-images.githubusercontent.com/1180416/42136028-f2e88a06-7d86-11e8-88c4-210e21f20ed3.png" alt="image"></p>
<h2 id="信息的重要性及时间分配"><a href="#信息的重要性及时间分配" class="headerlink" title="信息的重要性及时间分配"></a>信息的重要性及时间分配</h2><p>根据二八法则，核心知识在我们的信息里面，是最重要的百分之八十，它们起的作用最大，而剩下的零散知识点和即时信息，则没有那么重要了。零散知识点可以作为我们扩展信息广度的方法，快速了解一些未掌握的信息。而即时信息，比如新闻、微博等，大多时候作为我们的一个社交谈资，作为一个普通人，你谈不谈论世界杯，也并不会对你生活有什么很大的影响。</p>
<p>重要的信息，需要我们花时间花精力去掌握，一门课程、一本书籍、一种技能，都需要扎扎实实地花时间去搭建整个结构。比如练吉他，首先需要知道一些简单的乐理，然后学会和弦、看谱，然后勤奋练习，最终才有可能弹奏出一首曲子来；而即时消息，则可以用一些碎片时间来刷，上班路上，刷一刷微信公众号和朋友圈，看看有啥新鲜事在发生。</p>
<p>所以时间分配上是：<strong>80%</strong>时间放在核心知识，剩余<strong>20%</strong>放在零散知识点和即时信息。</p>
<h3 id="搭建你的信息渠道"><a href="#搭建你的信息渠道" class="headerlink" title="搭建你的信息渠道"></a>搭建你的信息渠道</h3><p>每个人都有自己常用的信息渠道，常见的有几种：</p>
<ul>
<li>书籍</li>
<li>网络信息</li>
<li>社交圈</li>
</ul>
<p>举个例子：小郑，是区块链工程师，他本科通过计算机科学专业的学习，掌握了编程的技能，他通过阅读技术书籍来学习新的技术，提高自己的水平，有时候他也逛逛知名博客以及开发者社区，了解一些技术动向。此外，他每天通过Reddit或者微博，看到一些新鲜事，他通过数字货币交流群里获得一些币圈消息，也会看朋友圈里面，大家发了什么新动态。</p>
<p>那么怎么设计自己的信息获取渠道呢？推荐的方法如下：</p>
<ul>
<li>通过书籍、论文等来获得结构化的核心知识，比如一门学科、一种技术</li>
<li>通过杂志、网络的Wiki来辅助自己丰富要搭建的新知识结构，并且不断内化提升认知</li>
<li>通过朋友、社交网络来获取一手的新闻，但是前提是要加以甄别，做一个批判性信息收集者</li>
</ul>
<p>时间上：</p>
<ul>
<li>挤出大块的时间来啃结构化的核心知识（比如上学、上班期间，周末的一大块时间，集中精力攻克）</li>
<li>抽出一小块时间，浏览零散的信息（如微信公众号、社区文章、杂志等，也可以收藏以后再看，或者通过语音听取知识付费的文章）</li>
<li>利用碎片时间，瞥一下最新的快讯、新闻、消息推送（如ReadHub.me，消息来了看一眼，有个基本的判断就得了，不重要的略过，重要的要进入下一步）</li>
</ul>
<p>行动上：</p>
<ul>
<li>知道什么信息从什么地方获取，节省你的精力和时间（比如，你想知道怎么开发Android App，你有一个朋友就是做这个的，问问他就是了）</li>
<li>更加靠近准确信息的源头，有助于提升信息即时性和有效性</li>
<li>提高敏感度和执行力，核心知识上做好准备，得到最新消息后立即行动</li>
</ul>
<h3 id="最重要的还是我们自己"><a href="#最重要的还是我们自己" class="headerlink" title="最重要的还是我们自己"></a>最重要的还是我们自己</h3><p>无论收集的信息多么准确，多么及时，圈子多么大，最重要的还是我们自己，对关键信息是否敏感，对于信息的提取和利用是否有效。</p>
<p>如果对关键信息不敏感，那么也还是抓不住机会，比如，很早就知道比特币的人，可能通过朋友之口或者某个文章得知，但最终知道了就知道了，并没有深挖，也没有进一步行动，最终大腿拍烂，而有的人，抓住了一个信息，深挖下去，获得了回报。</p>
<p>对信息的提取和利用，如果获得了信息，首先要评判信息的真伪可靠性，做一些基本的调查和过滤，才能为你所用，而不能听风就是雨，这样你将会成为信息的奴隶，而不是信息的主人。</p>
<p>那么我们就要有意地锻炼自己的信息敏感度和提取信息、利用信息的能力，得到最新的消息，要试着想想这个消息蕴含着什么隐藏信息，是否代表着什么趋势和潮流，值不值得深挖下去。如果值得，那么深挖下去就好了，最终将信息为你所用。</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>信息，总是无处不在的，在于你用发现的眼光去看待它，并且找到一种合适的方法， 沉淀下来，最终成为你的一部分。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/29/一款BCH-DAPP的诞生/" itemprop="url">
                  一款BCH DApp的诞生
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-08-29T08:31:49+08:00" content="2018-08-29">
              2018-08-29
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/08/29/一款BCH-DAPP的诞生/" class="leancloud_visitors" data-flag-title="一款BCH DApp的诞生">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="DApp的兴起"><a href="#DApp的兴起" class="headerlink" title="DApp的兴起"></a>DApp的兴起</h2><p>现在的区块链，处在一个爆发的前夕，之前的ICO狂躁，带来了一定的迷茫，但是大家都在说2018年是区块链应用元年，今年一定会有区块链的杀手级应用落地，然而得有人不断地在里面投入和试错，才能诞生这么一个杀手级应用。为此我们也进行了初期的尝试，基于BCH的公链，做了一款身份验证、密码管理的应用。做区块链DApp的过程中，时常会怀疑自己做的是不是伪需求，因为区块链的个性鲜明，使得开发起来挺别扭的。虽然获得了数据的安全性，但是开发效率却不高，需要自己定义一套协议，存取的方式也需要做一次加解密。</p>
<h2 id="报名BCH-Geek大赛"><a href="#报名BCH-Geek大赛" class="headerlink" title="报名BCH Geek大赛"></a>报名BCH Geek大赛</h2><p>近期，刚好来自重庆的盖茨实验室举办了一场BCH和EOS社区的极客大赛，大赛吸引了一批开发者和在校大学生的踊跃参与，从中也诞生了许多的优秀的应用，给我们带来许多启发，虽然暂时还只是一个雏形，不能有清晰明确的商业模式，但也是非常伟大的尝试。当然，我们也报名参加了这次的大赛，虽然仅了解了一点皮毛，但是我们还是鼓起勇气报名了。</p>
<p>我们给战队取名叫【神雕侠侣】，因为神雕侠和satoshi还挺谐音的，算是致敬中本聪吧。我们团队由两人组成，一个是我，另外一个是我女朋友，两个人一个负责开发，一个负责产品和运营。</p>
<p><img src="https://user-images.githubusercontent.com/1180416/41348653-e877b006-6f3f-11e8-862e-624ea539efc2.png" alt="image"><br>邓国东，曾任职于腾讯、ViaBTC，从事Web系统、数字货币矿池及钱包开发，是一个面向全栈的技术开发人员。有志于通过技术，让更多人从区块链中受益。</p>
<p><img src="https://user-images.githubusercontent.com/1180416/41348657-ed46da8a-6f3f-11e8-8ec4-f6cc8349afae.png" alt="image"><br>杨春萍，任职于漫游超人，擅长品牌及产品社交媒体运营运营，精通两微一端及数字媒体传播，曾主要负责漫游超人品牌植入《唐人街探案2》项目营销。</p>
<p>刚上台介绍战队的时候，我一个人上去，他们以为我是那只雕。。。<br>既然报名了，那就硬着头皮也要上，于是也赶工了几天，终于将这个demo给做出来了。</p>
<h2 id="为啥要做一个密码管理DApp"><a href="#为啥要做一个密码管理DApp" class="headerlink" title="为啥要做一个密码管理DApp"></a>为啥要做一个密码管理DApp</h2><p>我们生活中需要使用到非常多的账号密码，然而这里有非常多的安全隐患，有许多人使用的账号密码甚至泄露已久，相当于在互联网里面裸奔，并没有什么隐私可言，甚至切身利益有可能被人随时掠夺。就密码来说，我们有许多的痛点：</p>
<ul>
<li>密码多（多到记不住）</li>
<li>密码弱（密码很容易破解）</li>
<li>密码重复（一个被破解，连带其它遭殃）</li>
<li>不好输入（手动输入很繁琐）</li>
</ul>
<p>我一开始就有一个愿望解决这些真实存在的痛点，能否开发一个使用区块链作为分布式存储方案的密码管理器呢？<br>答案是可行的，参考LastPass和1Password等竞品后，我们设计出了IFPassword，基本思路如下：</p>
<ul>
<li>IFPassword配套有网站、小程序、浏览器插件</li>
<li>用户通过浏览器插件可方便地添加账号密码、填写账号密码</li>
<li>重要的密码数据将存储在去中心化存储上</li>
<li>不重要的信息存储在IFPassword服务器上</li>
</ul>
<p>于是我们初步实现了添加账号密码、填写账号密码的基础功能，当然，一开始只是为了验证这个流程，没有做到非常好的用户体验。</p>
<h2 id="区块链知识"><a href="#区块链知识" class="headerlink" title="区块链知识"></a>区块链知识</h2><p>BCH上有一个OP_RETURN的操作码，在写入一笔交易的时候，允许在OP_RETURN上附带一个数据，大小为220Byte，足够塞下一条微博、一段哈希了。像之前诞生的memo——区块链上的微博，keyport——区块链上的微信等等都是基于OP_RETURN来存储的数据，我们实现的这个密码管理器，也是讲数据通过比特币采用的椭圆曲线算法加密后放置到OP_RETURN上的，它的安全级别和比特币是一样的。</p>
<p>那么如何写入这个OP_RETURN呢？其实也很简单，如果你连接的是一个比特币的节点，那么你只需要构造交易的时候，将这段数据写入输出的<code>data</code>字段，然后签名之后广播即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bitcoin-cli createrawtransaction &apos;[&#123;&quot;txid&quot;:&quot;3b0da5fd1beb71e1f47da2f3e9bd1af2e7026fd0282d18d9777a13e49089d146&quot;, &quot;vout&quot;:0&#125;]&apos; &apos;&#123;&quot;bitcoincash:qpktcr9pj6dh8vgepuvumymhwrg7536d7u4qsvdvhc&quot;: 0.00001500, &quot;data&quot;: &quot;6f11616d6f4141414b3034514477712b77574b384b462f567a793362375a4a6c6d4549475a79783070464d73347842447432424d4c4c65414a547449376b63622b43377a6e69455132554e4968353734626c4d5456534d786a43654d764f617162636641465966677868594a39557642526b687a365a63776361377437506a315a367171704e2f46363955774d2f68514a776c432b71694254314f596470686352656c4e664945314e55484a30745450742f644e4746565731712b673d3d&quot;&#125;&apos;</span><br></pre></td></tr></table></figure>
<p>如上面代码所示，将加密后的数据编码成了16进制写入了交易中，广播出去之后，就可以在区块链浏览器中看到这样的数据了，这个数据就是日后恢复数据的关键，不过千万不能把私钥给泄露了出去，泄露出去拿到私钥的人就可以解密这段消息了。<br><img src="https://user-images.githubusercontent.com/1180416/41348670-f930563c-6f3f-11e8-8f8e-492f77c3643f.png" alt="image"></p>
<h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><p>编程实现了上述的写入区块链的逻辑以及相关的交互之后，大致的最终效果如下：</p>
<p><img src="https://user-images.githubusercontent.com/1180416/41348682-00cad4da-6f40-11e8-8c4b-2b2b80bff480.png" alt="image"><br>用插件管理TOTP二次验证，实现快速查看填写。</p>
<p><img src="https://user-images.githubusercontent.com/1180416/41348691-05e9f7e8-6f40-11e8-9b1a-2c03ee758a95.png" alt="image"><br>在插件中添加站点的账号密码。</p>
<p><img src="https://user-images.githubusercontent.com/1180416/41348712-1738ead6-6f40-11e8-9f6a-7b17d2691b47.png" alt="image"><br>在插件中查看各个网站的账号密码，可以复制粘贴到登录表单中。</p>
<h2 id="启发"><a href="#启发" class="headerlink" title="启发"></a>启发</h2><p>现在的互联网进入移动互联网以后，变成了一个个信息孤岛，大家在岛上玩得不亦乐乎，但是如果一个岛要到另外一个岛，那成本就高了。然而发明互联网的初衷，就是让人与人、人与物能够互相联通，然而现在却是越来越封闭了，并且原本属于用户的数据以及权利，被各个大公司垄断，并且他们还不能提供连续的服务，说不定哪天说停就停。我们需要一个能够持久存储你的数字资产的东西，一个人人能够使用，信息能够充分流淌的工具，就像早期的互联网一样，在上面探索可以不断发现新的东西，在区块链上，也是这样，顺藤摸瓜，能够发现许多的新东西。</p>
<p>我们做的这个玩意，它对我们还是有一点启发的：</p>
<ol>
<li>数据是用户的资产，用户可以选择公开、加密它，也可以选择转让、授权给他人</li>
<li>数据是不需要依赖一个中心的，大家存储，大家使用，突破空间、突破时间的限制</li>
</ol>
<p>未来，信息存储的方式以及内容分发的方式将产生极大的改变，试想这样一个问题，你是如何存储你的所有照片的？存在自己硬盘，需要常常备份，还是存在照片管理软件或在线空间，非常不方便管理和移动。然而，其实你的照片可以存储得无处不在，随时要随时取，并且永久保存，不会消失，你拥有对它的所有权利，你可以加密，你可以卖给别人，可以授权他人使用，等等。用户将重新获得数据的自由。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/29/K线和深度图的实现/" itemprop="url">
                  K线和深度图的实现
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-08-29T08:29:12+08:00" content="2018-08-29">
              2018-08-29
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/08/29/K线和深度图的实现/" class="leancloud_visitors" data-flag-title="K线和深度图的实现">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>K线和深度图在股票及数字货币交易中到处可见，然而这个K线和深度图的实现，如果没有真实写过一次，对里面的一些坑还是有可能避免不了。最近由于我们的产品中开发了一个云算力合约的交易K线，所以我也实现了一个简单的K线图和深度图。</p>
<p>K线长下面这样：<br><img src="https://user-images.githubusercontent.com/1180416/39085992-d4ef78bc-45bd-11e8-87ba-1db9bc2b0eb8.png" alt="image"></p>
<p>要实现一个K线，首先要知道K线是什么，K线由于长得就像一根根蜡烛，所以又被称为蜡烛图，是用来反映价格走势的一种图表。K线可以按照不同的周期进行划分，例如15分钟、1小时、1天等等，它的每一根“蜡烛”反映的是那个周期内的开盘价、收盘价、最高价和最低价，而底部还会有一个成交量。</p>
<p><img src="https://user-images.githubusercontent.com/1180416/39085996-e1006616-45bd-11e8-8227-eda209da1424.png" alt="image"></p>
<p>K线的开盘价，就是“蜡烛”矩形的底边或者顶边，收盘价就是另外一边，绘制时，先绘制开盘价，如果收盘价高于开盘价，那么就绘制在开盘价上方，整个矩形的颜色是绿色（假设绿涨红跌），反之，则这个周期内是跌的，则会绘制成红色。</p>
<p>每根蜡烛，还会有一根细线贯穿，这根就叫“引线”，引线顶端代表该周期的最高价，底端代表着最低价，这根引线反应了这个周期内的价格震动幅度。</p>
<p>一根根蜡烛排列起来，就能看到价格的走势，一眼就可以看出是涨是跌，同时也能看住单个周期内的涨跌情况。一般除了蜡烛之外，还有一些其它指标，如MACD，KDJ等。这里讨论比较常见的MACD，也即平滑异同移动均线，它是采用每个周期的收盘价，做一个平均值，有MA7、MA30等不同周期长度的平均值，一般绘制K线的组件已经提供了该功能，只要填入数据，它将自动计算该周期及前六个周期的收盘价平均值，如果不满七个周期，那么则不计算。</p>
<h2 id="K线图的实现"><a href="#K线图的实现" class="headerlink" title="K线图的实现"></a>K线图的实现</h2><p>K线图要实现快速的加载，必须要添加缓存，否则每次都是用成交单据实时计算，则非常耗时。对于我们上面提到的单根蜡烛的数据，我们要将它按不同的周期存起来。以15分钟的为例，每根K线，是一个数据项。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    [time1, open1, high1, low1, close1],</span><br><span class="line">    [time2, open2, high2, low2, close2]</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>拉取K线数据时优先从缓存中取，如果缓存中取不到，那么则从DB中根据过往的成交记录生成，然后存储到缓存中，以备下次使用，一般来说，首次加载是比较耗时的，因为这个时候所有K线数据都还没有。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">points = []</span><br><span class="line">r = redis_store.hmget(market_type + &apos;_hash_trade_kline_&apos; + period_type, keys)</span><br><span class="line">for index, value in enumerate(r):</span><br><span class="line">    t = int(keys[index])</span><br><span class="line">    is_cache = ((index + 1) != len(r))</span><br><span class="line">    if not value:</span><br><span class="line">        v = get_kline_point(market_type, period_type, t, t + interval)</span><br><span class="line">        if v[5] == 0:</span><br><span class="line">            if not last_v:</span><br><span class="line">                continue</span><br><span class="line">            last_close = last_v[4]</span><br><span class="line">            v[1] = last_close # open</span><br><span class="line">            v[2] = last_close # high</span><br><span class="line">            v[3] = last_close # low</span><br><span class="line">            v[4] = last_close # close</span><br><span class="line">        if is_cache: // 防至缓存</span><br><span class="line">            redis_store.hset(market_type + &apos;_hash_trade_kline_&apos; + period_type, t, json.dumps(v))</span><br><span class="line">    else:</span><br><span class="line">        v = json.loads(value) // 直接读取缓存</span><br><span class="line">    points.append(v)</span><br><span class="line">    last_v = v</span><br><span class="line">return points</span><br></pre></td></tr></table></figure></p>
<p>值得一提的是，如果当前周期没有成交，那怎么办？如果没有成交，那么开盘价、收盘价、最高价、最低价要以昨日的收盘价为准，这样才能保证K线是平滑变化的，而不会因为这个周期没有成交量，而导致K线断开，或者突然跌到0。</p>
<h2 id="K线的绘制"><a href="#K线的绘制" class="headerlink" title="K线的绘制"></a>K线的绘制</h2><p>K线是在前端进行绘制的，通过highlight或者Trading View等一些专业的K线绘制工具，就能将K线数据绘制出来了，一般只要配置组件的参数，将请求得到的数据放入即可，另外，MA7、MA30等一些指标，组件也可以自动根据历史数据计算出来。</p>
<p>MA7，即过往七个周期的收盘价格的移动平均值，依此类推，MA30，就是30个周期的收盘价格的移动平均值。所谓移动，就是说随着周期往前移动，进入一个最新数据，就会剔除一个最老数据，类似一个队列一样。MA值能够反映价格的变化趋势，是人们判断价格走势的常用工具。虽然无需我们自己计算，但我们不妨看看它们的计算公式：</p>
<p><img src="https://user-images.githubusercontent.com/1180416/39086035-5d803b30-45be-11e8-85f4-753d5394270e.png" alt="image"></p>
<h2 id="深度图"><a href="#深度图" class="headerlink" title="深度图"></a>深度图</h2><p>对于用户的挂单，我们往往要展示一个深度图。深度图展示的是买卖单的价格及数量情况，通过对比买盘和买盘，我们就知道是买盘强劲还是买盘强劲，以及交易的活跃程度。</p>
<p><img src="https://user-images.githubusercontent.com/1180416/39086038-675aa3ac-45be-11e8-99c7-85215d158fd8.png" alt="image"></p>
<p>如上图的深度图，展示了各个价格的买卖量，然后根据买卖数量，来绘制红色区块和绿色区块的长度。这个长度是由两个因素决定的，一个是该档价格的累计委托量，这个累计委托量的意思就是，这个量是所有上的数量一直加下来累加的，而不仅仅是这档价格的量，它将作为分子，另外一个是所有委买或者委卖的量里面的最大值。比如，价格为0.0043这档，买入合计529.44，而总体的买入合计为1739，总体卖出为7867。则这一个块的绿色部分长度就是 529.44 / 7867 * 方块最大长度。我们可以看到上图右侧的卖出合计比较大，所以它的红色色块会长一点。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>很多经验，自己不试一次，还真就不知道K线是这样绘制出来的，而这也仅仅只是金融图表的最简单的一种，金融领域还有很多指标可以用来反映价格和市场的变化，如果能够掌握它们，用来帮助自己或者用户来把握趋势，都是意义的事情。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/05/12/数字货币的盈利模式/" itemprop="url">
                  数字货币的盈利模式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-05-12T09:06:48+08:00" content="2018-05-12">
              2018-05-12
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/05/12/数字货币的盈利模式/" class="leancloud_visitors" data-flag-title="数字货币的盈利模式">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="是否存在盈利模式？"><a href="#是否存在盈利模式？" class="headerlink" title="是否存在盈利模式？"></a>是否存在盈利模式？</h2><p>数字货币是否有自己的盈利模式？答案是，有的。<br>从比特币诞生开始，数字货币发展至今已经将近十年的时间。这十年内，数字货币价格大起大落，许多人投身到这个领域，有的赚得盆满钵满，有的则亏得倾家荡产。我们都知道，炒币总是有风险的，然而这其中，有一些聪明人，从中把握住了稳定可靠的盈利模式，从而分得了一杯羹，并且在行业内具有稳固的积淀。</p>
<h2 id="常见盈利模式"><a href="#常见盈利模式" class="headerlink" title="常见盈利模式"></a>常见盈利模式</h2><p>互联网发展至今，因为一开始奠定了免费的基础，但后来人们基于免费的互联网服务又发现了以下几种盈利模式：</p>
<ol>
<li>广告</li>
<li>增值服务</li>
<li>电商</li>
<li>金融</li>
</ol>
<p>数字货币领域方兴未艾，但是却已经形成它独特的盈利模式，主要分为这么几大类：</p>
<ol>
<li>矿机矿池</li>
<li>交易所</li>
<li>钱包</li>
<li>DAPP</li>
</ol>
<p>今天对发token，硬分叉等盈利模式不予谈论，因为这其实是一种对某种想法的ICO，其目的不应该是赚钱，虽然很多人很多项目通过这种方法收割韭菜，大赚一笔。</p>
<h2 id="矿机矿池"><a href="#矿机矿池" class="headerlink" title="矿机矿池"></a>矿机矿池</h2><p>由于比特币等数字货币天然需要通过挖矿来获得，大家自然而然就会去研发各种高性能的矿机，币圈的矿机厂商 比特大陆、阿瓦隆 等就是通过研发矿机，然后销售出去赚钱。由于数字货币价格不断上涨，一台机器成本其实并不会比PC更高，然而由于供求关系导致，价格却远比一台PC要高，这中间的利润也可想而知。只要能生产出来，销售出去，矿机生产是一个非常好的盈利模式。</p>
<p>代表商家：比特大陆，嘉楠耘智</p>
<p>单打独斗的挖矿现在已然行不通了，不需要聚集大家的算力一起，才能够挖出区块，获得稳定的收益。为了满足这种刚需，矿池就这么诞生了。矿池集合了成千上万矿工的算力，来解答由共识机制给出的难题，并且按照PPS、PPLNS等方式给矿工分配收益，并且从中收取挖矿手续费赚钱。长期来看，矿池是一个稳赚不赔的生意，但是它需要承担由于出块随机性导致的收益不稳定风险（也即需要垫付收益），但是总体来看，挖矿的运气值总是接近于100%的，这是数学层面决定的。</p>
<p>在矿机矿池上衍生出来的，还有云挖矿的一个盈利模式，通过将一个个矿机打包成一个个虚拟的稳定的单位算力来出售，有点类似阿里云一样，只不过配置简单很多，只要购买了，就享有这份算力的收益权，用户将每天获得收益。这种盈利模式，通过方便用户参与挖矿，同时赚取差价、手续费、管理费来赚钱。</p>
<p>代表商家：Antpool, f2pool, ViaBTC</p>
<h2 id="交易所"><a href="#交易所" class="headerlink" title="交易所"></a>交易所</h2><p>币圈最不缺的，就是交易所了，现在可谓是到处都是交易所，币币交易所、现货期货交易所等等，我们耳熟能详的OKEX，火币，币安，ZB等这些都是交易所，它们通过收取交易手续费赚取利润，由于交易的需求量很大，而且该盈利模式非常稳固，故而这些厂商也是赚的盆满钵满。当然，交易所是有比较大的安全风险的，一旦被黑，可能损失惨重，从此破产一蹶不振。</p>
<p>交易所还衍生出来很多的玩法，有期货交易、点对点交易、投票上币、发token抵扣手续费等等。以期货杠杆为例，由于数字货币价格波动较大，故而很多投机客想要赌一把，故而投资杠杆，将收益放大个几十倍，有可能一夜暴富，当然，也有可能一夜暴负。之前看新闻，一个哥们投资了杠杆，将给小孩治病的钱拿去玩杠杆，最后爆仓亏了一千多万，跑到OKEX去撒农药去了。其实期货本来是个好东西，可以用来平衡现货的风险，然而用于投机，则可能万劫不复，所以还是要谨慎使用。</p>
<p>代表厂商：OKEX，火币，币安，ZB，CoinEx</p>
<h2 id="钱包"><a href="#钱包" class="headerlink" title="钱包"></a>钱包</h2><p>钱包领域，在中国的发展不如上面两个繁荣，其盈利模式也没有那么直接强大。钱包作为基础设施的一环，其实是直接面向用户的，负责储存数字货币，同时作为用户使用货币的一个入口。如果是服务商，可能会搭建一个自己的全节点来做钱包管理，普通用户，可以选择一些客户端钱包来使用。</p>
<p>钱包分为两种模式，一种是Offchain模式，另外一种是Onchain模式，所谓Offchain，就是维护了一个余额，发出的交易不直接上链的，而是通过商家统一发送。例如币信钱包，就是一个Offchain钱包，用户不持有私钥，而比特派、imtoken等，则是Onchain钱包，用户直接持有私钥。数字货币的初衷，就是每个人都要有一个自己的银行，Offchain钱包虽然简单易用，但它是中心化的，集聚了比较大的风险，其实各大交易所及矿池的钱包，就是一个Offchain钱包。</p>
<p>Offchain钱包通过收取提现手续费，或者将多个输出一起打出来盈利，但是一般的Onchain钱包，都已经有开源的钱包，一般不会收取手续费，只会收取一个网络矿工费，是用于奖励矿工的，钱包商不获得这部分利润。那么钱包商可以接入其它一些服务，比如币币兑换、打包理财产品等来实现盈利。</p>
<p>代表厂商：币信、比特派、imtoken</p>
<h2 id="DAPP"><a href="#DAPP" class="headerlink" title="DAPP"></a>DAPP</h2><p>目前，数字货币的DAPP还没有成熟到能够实现体验很好的应用，然而这块将是未来的发展方向。比如之前的以太猫，在ETH之上实现了一个猫游戏的智能合约，用户可以买卖，繁衍小猫，如果玩的人多，创造游戏的人，能够通过这个智能合约赚钱，比如买卖一次收取一定的手续费。如果说DAPP是基于区块链的互联网应用，那么开发这些DAPP的人，是可以直接通过使用DAPP的用户赚取利润的，基于这之上有非常多的玩法，之前互联网的盈利模式，也适用于DAPP。</p>
<p>未来例如EOS、NEO等公链能够支撑更多功能和应用时，将会涌现一大批开发DAPP的团队，作出一些很有意思的应用，并且通过这些应用，实现价值的流通传递。</p>
<p>代表案例：以太猫</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>数字货币中赚钱的方式有许多种，然而大类的稳固的需求就那么一些：挖矿、炒币、存币、做应用。所以只要是一些刚需，必然会诞生出一个稳固的产业和盈利模式。目前对于数字货币而言，还没有特别多的应用落地，所以最重要的就是挖掘其使用场景，提高其性能，科普民众，相信坚持这样做的企业，将会得到丰厚的犒赏。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/05/12/浅谈区块链应用DApp/" itemprop="url">
                  浅谈区块链应用DApp
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-05-12T08:59:03+08:00" content="2018-05-12">
              2018-05-12
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2018/05/12/浅谈区块链应用DApp/" class="leancloud_visitors" data-flag-title="浅谈区块链应用DApp">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="区块链应用"><a href="#区块链应用" class="headerlink" title="区块链应用"></a>区块链应用</h2><p>上一篇《数字货币盈利模式》里面提到，DApp是未来数字货币领域的一个比较强大的盈利模式。区块链，作为一个基础设施，提供了分布式的去中心化可信数据库，人们可以基于此，可以开发各种应用，适用于不同的场景。然而，由于区块链的独特特性，适用于比特币的，并不适用于其它应用，在开发应用之前，首先要问自己几个问题：</p>
<h3 id="应用涉及不信任的双方或多方吗？"><a href="#应用涉及不信任的双方或多方吗？" class="headerlink" title="应用涉及不信任的双方或多方吗？"></a>应用涉及不信任的双方或多方吗？</h3><p>是，可以用区块链技术，不是，不要用区块链技术。</p>
<p>需要涉及不信任的多方，要通过上链的方式，对方可以只验证链上的数据而不验证对方身份，从而简化这个验证过程。假如链上数据可能涉及很多人，这个涉及的人员或角色越多越好，解决100万人的信任比起仅仅解决两个的信任要好。比特币就是既能解决两个人的信任（比如一次交易），重复该模式（不断累积的交易），也能解决n个人的信任。</p>
<h3 id="应用对性能要求高吗？"><a href="#应用对性能要求高吗？" class="headerlink" title="应用对性能要求高吗？"></a>应用对性能要求高吗？</h3><p>是，不要用区块链技术，不是，可以用区块链技术。</p>
<p>区块链是典型的去中心化的一个共识系统，比特币平均十分钟才能出一个块，ETH平均十几秒一个块，这得要多有耐心才能忍受这样使用应用啊。一些对体验要求高的游戏、即时通讯等并不适合区块链，除非特别重视信任。</p>
<h3 id="应用需要大量存储吗？"><a href="#应用需要大量存储吗？" class="headerlink" title="应用需要大量存储吗？"></a>应用需要大量存储吗？</h3><p>是，不要用区块链技术，不是，可以用区块链技术。</p>
<p>区块链冗余了很多很多份数据存储在分布式的网络中，链上存储的数据是非常昂贵的，区块大小有限，大量的数据根本没法在区块链上进行存储。如果要存，倒是可以使用IPFS等第三方的方式存储，链上只放一个链接即可。</p>
<h3 id="应用数据要公开透明吗？"><a href="#应用数据要公开透明吗？" class="headerlink" title="应用数据要公开透明吗？"></a>应用数据要公开透明吗？</h3><p>是，可以用区块链技术，不是，不用区块链技术。</p>
<p>区块链为的就是公开透明，如果都是一些私密数据，仅本人看的，那还是不要上传到链上了。</p>
<h3 id="应用数据是否要频繁修改？"><a href="#应用数据是否要频繁修改？" class="headerlink" title="应用数据是否要频繁修改？"></a>应用数据是否要频繁修改？</h3><p>要，不要用区块链技术，不要，可以用区块链技术。</p>
<p>就目前来说，对于区块链的特性，以上问题是判断要不要做一个区块链应用的回答。</p>
<hr>
<h2 id="从技术角度看区块链"><a href="#从技术角度看区块链" class="headerlink" title="从技术角度看区块链"></a>从技术角度看区块链</h2><p>我们原有的计算机技术或者互联网里面，已经有相当多的技术模型，而区块链可以类比成以下的模型：</p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>可以将区块链看成是一个需要付费的公共数据库，要写数据，得付出矿工费。写在上面的数据，你可以加密，也可以不加密。</p>
<h3 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h3><p>可以将区块链看成是一个世界各地消息流淌的一个消息队列，你可以取阅任何上面公开的信息，并且用逻辑控制数据的流淌和处理。</p>
<h3 id="网页"><a href="#网页" class="headerlink" title="网页"></a>网页</h3><p>区块链就像一个网页一样，上面可以有各种各样的链接，链到互联网世界的其它地方。</p>
<h3 id="云计算"><a href="#云计算" class="headerlink" title="云计算"></a>云计算</h3><p>区块链中还可以存储智能合约（一段程序），你在上面写好代码，可以让矿工来帮你运行，计算得到结果。</p>
<p>区块链是一个综合的技术，其实也说明区块链是可以分层的，由上至下大致可以分为：</p>
<ul>
<li>应用层（外部应用）</li>
<li>业务层（链上协议）</li>
<li>共识层（共识机制）</li>
<li>存储层+网络层</li>
</ul>
<p>还可以修改其组成来达到优化的目的：</p>
<ul>
<li>修改共识机制，在完全去中心化和中心化之间平衡（PoW/PoS/DPoS/DAG/超级节点等）</li>
<li>为扩大存储，采用更灵活的外部存储（IPFS、SC等）</li>
<li>强化智能合约，提供更强大的应用运行环境（EOS、星云链、小蚁股等）</li>
</ul>
<hr>
<h2 id="已有的DApp"><a href="#已有的DApp" class="headerlink" title="已有的DApp"></a>已有的DApp</h2><p>现在在各种各样的公链上，已经涌现了许多的应用，我们分别来认识几个典型的应用。这里有一个搜罗了DApp的<a href="https://dapp.review/" target="_blank" rel="noopener">网站</a>。</p>
<h3 id="发币——ETH的ERC20协议"><a href="#发币——ETH的ERC20协议" class="headerlink" title="发币——ETH的ERC20协议"></a>发币——ETH的ERC20协议</h3><p>遵守ERC20协议，可以在ETH上发行自己的代币（子货币），它更加轻量和灵活，无需自行开发公链即可发行数字资产。ERC20这个协议定义了合约暴露的一些接口，符合这些功能和接口定义的，即符合ERC20协议。ICO发起者们部署一套智能合约，将Token分发给用户，人们像维护传统数字货币一样维护这些代币，可以查询余额、转账（充值、提现）。</p>
<p>ERC20协议衍生出来一个新的领域——ICO，因为人人都可以发行数字资产，所以很多个人或者项目纷纷通过发行数字资产的方式来筹集资金，用Token来换取用户的真金白银。这是一个很好的融资工具，连美剧《硅谷》里面的<a href="http://www.piedpiper.com/" target="_blank" rel="noopener">piedpiper</a>都用它来发行了一个币以取代3000万美金的B轮融资，然而现实社会里却有许多人滥用它来割韭菜，只能说韭菜们别哭。</p>
<h3 id="迷恋猫-Crypto-Kitties"><a href="#迷恋猫-Crypto-Kitties" class="headerlink" title="迷恋猫 Crypto Kitties"></a>迷恋猫 <a href="https://www.cryptokitties.co/" target="_blank" rel="noopener">Crypto Kitties</a></h3><p>ETH上很火的一个游戏，开发者将猫的基因信息存储在ETH的区块链中，初代猫生成后，可以交配，买卖。众多用户充值进来买猫，导致这个应用一度将ETH的区块给搞堵了，由于ETH没有做应用隔离，所以一堵全堵，ETH上的其它应用也全都受到影响，这点被人们所诟病，而区块链的性能问题也暴露无遗。</p>
<p>我运行过ETH的节点，对机器的配置要求非常高，既需要大量CPU计算，也需要大量内存，还需要大量硬盘空间。网络稍微堵一点，整个节点就会变得不稳定，RPC容易失败。</p>
<p>事实上，大部分的DApp其实是游戏，这里也说明游戏+区块链也有它独特的应用场景。</p>
<h3 id="去中心化微博-Memo-BlockPress"><a href="#去中心化微博-Memo-BlockPress" class="headerlink" title="去中心化微博 Memo/BlockPress"></a>去中心化微博 <a href="https://memo.cash/" target="_blank" rel="noopener">Memo</a>/<a href="https://www.blockpress.com/" target="_blank" rel="noopener">BlockPress</a></h3><p>基于BCH的去中心化微博，通过定义一些协议，将用户的发推、点赞、评论、关注、取消关注等操作，都写到区块链上，这样就形成了一个简易的微博系统。技术上，使用OP_RETURN操作码后面的数据字段来存储操作及应用数据，去中心化的Youtube很快就会出现，至少一些雏形(如<a href="https://jukebox.cash/" target="_blank" rel="noopener">Jukebox.cash</a>)已经出现了。</p>
<p>其实比特币出现之后的早期，就有人通过在区块缝隙里面塞些额外的数据来做一些应用，最简单的就是区块链刻字了，将一些有纪念意义的话刻在区块链上，它会与区块链同在，变得不可磨灭、不可撤销。ETH上，还有人将色情图片放到区块链上去，以此来告诫人们，区块链的两面性，它既能永久保存美好的东西，也能让不好的东西不可磨灭，你拿它没半点办法。</p>
<p>更多DApp的例子，也可以看看这篇<a href="https://zhuanlan.zhihu.com/p/36741873" target="_blank" rel="noopener">浅谈你们根本不懂的区块链游戏</a>。</p>
<hr>
<h2 id="DApp的方向"><a href="#DApp的方向" class="headerlink" title="DApp的方向"></a>DApp的方向</h2><p>未来的DApp发展有两个比较明确的方向，一方面，区块链的基础设施不断升级完善，处理能力和存储数据容量逐渐增长，DApp运行所需的“水”和“电”基础设施逐渐齐备；另外一方面，DApp的应用开发蓬勃发展，越来越多开发人员参与到DApp的开发中来，将区块链与游戏等传统应用结合起来。</p>
<p>BCH、EOS、NAS等各个公链也在逐步升级完善，比如BCH通过扩容，使得每一个交易的花费只需几分钱，成本极低，在5月15号还将区块大小扩展至32MB，增加计算相关操作码，并且拓展OP_RETRUN至220个字节，可以存储更多的数据，这些都为其上生长应用非常有帮助。</p>
<p>旧的互联网已经让人觉得厌倦了，人们渴望新的东西！币圈一直都在等着区块链技术的应用落地，而一个爆款应用的产生，将会带来巨大的颠覆，它值得期待。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/12/03/一次把事情做好/" itemprop="url">
                  一次把事情做好
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-12-03T15:42:36+08:00" content="2017-12-03">
              2017-12-03
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2017/12/03/一次把事情做好/" class="leancloud_visitors" data-flag-title="一次把事情做好">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>工作和生活中，做某件事情，我们一般人的做法是第一次做错了某件事情，然后纠正，再做一次，纠正，直到正确。以编程为例，它不是一个简单的线性问题，而是一个多维度的问题，涉及了功能、性能等问题。如果编程的时候，不能考虑到方方面面，就容易出错，世间大多的事情都是如此，不是简单的线性算术题，而是一个个综合了各种因素的难题。那能不能一次把事情做对呢，或者更大概率上把事情做对呢？答案是可以的，而且这个答案有可能让我们人类失去思考的优势。</p>
<h2 id="什么是一次把事情做对"><a href="#什么是一次把事情做对" class="headerlink" title="什么是一次把事情做对"></a>什么是一次把事情做对</h2><p>一次把事情做对的意思，就是它的字面意思，比如做这件事情，预期的目标是这样的，那么做完之后，验证了，它就是这样的，那么这件事情就算是做对了，或者说是做到符合你的预期了。这个事情难就难在一次性做对上面，对于没有做过的事情，谁都很难一次做对，而你练习过非常多的事情，你总是能够做对。比如拿筷子，学会拿筷子的你，总是能正确地拿住筷子，夹住食物，但是对于一两岁的小孩来说，就很难了。那么我们作为一个成年人，如何在没有做过某件事情的前提下，做对这件事情。</p>
<p>这个问题具有更广泛的意义，那就是我们通过过往的学习和实践，提出对新问题的解决办法的能力，也即解决新问题的能力。这个次数也不仅限于1次，可以是若干次。这个能力非常重要，需要很强的总结归纳，以及类比推理能力，比如做A任务和B任务有点类似，于是我用做A的办法稍加改造，就做成了B任务，编程上也是如此，代码思想经常是类似的，但是做的事情总是新的事情，程序只需被写出一次。</p>
<h2 id="一次把事情做对的本质"><a href="#一次把事情做对的本质" class="headerlink" title="一次把事情做对的本质"></a>一次把事情做对的本质</h2><p>那么一次把事情做对的本质是什么呢？做一件事情，我们应该拆开来看，第一是你做这件事情的准备，一方面是思考准备，另外一方面是物质准备，第二是你做这件事情的执行过程，是不是精准无误的。先看看我们平常要做某事的顺序吧，做一件事情之前，我们总是需要思考一下的，比如我要去某地旅游，我要做的准备是规划好旅程，订好房间，然后收拾东西，然后按计划搭乘交通工具过去。如果你制订好了旅程，几点起床，坐什么交通工具，几点到达，然后怎么样，那么你照这个走下来，只要不错过时间，不出意外，总是能够到你旅游的地方。</p>
<p>这里可以看出做要做对一件事情的本质，其实就是两点：</p>
<ul>
<li>你想好了这件事</li>
<li>你准确执行了这件事</li>
</ul>
<p>这里难的是你想好了这件事，那么怎样才算想好了呢。想好了，应该是就你所能考虑的那些可能性，都被考虑过一遍，并且想到了如何正确地处理每一种情况，如果这些都想好了，这件事情就算成功了一半。这个想的过程，其实就是搜索，把能够想到的情况都一个个列举出来，考虑它们的异同和处理方案。在搜索这方面，人比机器要逊色很多，我们在思考上的优势是能够将多个维度都综合进来，机器在这方面不太擅长，但是我们对于列举各种可能没有机器那么擅长。今后随着技术的发展，机器也能自我学习，考虑更多的维度，是极有可能做得比人类好很多的。</p>
<h2 id="如何做到一次把事情做对"><a href="#如何做到一次把事情做对" class="headerlink" title="如何做到一次把事情做对"></a>如何做到一次把事情做对</h2><p>既然已经找到了一次做对事情的本质，那么很显然，我们也找到了一次做对事情的方法。这个方法就是：</p>
<ul>
<li>事前做充分的准备，考虑到每种可能的处理情况，区别不同情况的解决方案</li>
<li>检查自己的方案，确认无误，忠实地按照之前的规划执行自己的想法</li>
<li>按照变化及时地调整自己的方案和执行，重复上面两步</li>
</ul>
<p>其实以上两条都非常难做到，有的人比较不爱动脑，想都不想，就去做一件事情，最后的可能是得不到好的结果，或者抱着一种侥幸心理，觉得不做功课，应该也不会错的，这样做的坏处是，没有降低做错这件事的可能性，如果做对了，都是碰对的，不能做到一次做对。有的人，一切准备和可能情况都考虑好了，但是执行的时候总是想的是这样，做的却是另外一个样，这样即使一开始的出发点很好，但总是南辕北辙，必须要知行合一，否则将达不到最初的目的。</p>
<p>以上两点总结起来就是，思考先行，知行合一，做事前先想清楚，很多细节不想清楚，总是会出错的，另外行为也要和实践对应，如果行和知不一致，那和不知也没有分别。</p>
<p>我自己，其实比较欠缺的就是第一点，考虑问题总是不够全面，总是遗漏或者有不对的地方，这可能也和我自己爱偷懒有关系，不愿意在这那么多的情况中去一个个考虑，很多细节一带而过，然而越是牛逼的人，在细节方面越是扎实的令人害怕，这也是我想达到“一次把事情做对”所必须要做出的改变。</p>
<p>by bibodeng 2017-12-03</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/bitcoin-cash-logo.svg"
               alt="bibodeng" />
          <p class="site-author-name" itemprop="name">bibodeng</p>
          <p class="site-description motion-element" itemprop="description">区块链爱好者，互联网从业者</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">187</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/bibodeng" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/bibodeng" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/bibodeng" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://ifwallet.com" title="IFWallet" target="_blank">IFWallet</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://ifpass.cash" title="IFPassword" target="_blank">IFPassword</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bibodeng</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("RrMSWOa8nuCnCCWn8TyPa7Od-gzGzoHsz", "8xnzit83sqv6vUEuXlsEWe0s");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
