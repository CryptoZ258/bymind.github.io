<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="计算机 比特币 互联网金融 IFWallet" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="区块链爱好者，互联网从业者">
<meta name="keywords" content="bibodeng, blockchain, bitcoin, bitcoin cash, life, programmer">
<meta property="og:type" content="website">
<meta property="og:title" content="bibodeng">
<meta property="og:url" content="https://bibodeng.github.io/page/10/index.html">
<meta property="og:site_name" content="bibodeng">
<meta property="og:description" content="区块链爱好者，互联网从业者">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="bibodeng">
<meta name="twitter:description" content="区块链爱好者，互联网从业者">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> bibodeng </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">bibodeng</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Think By My Mind</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/05/11/笑谈价值观/" itemprop="url">
                  笑谈价值观
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-05-11T20:07:00+08:00" content="2013-05-11">
              2013-05-11
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/05/11/笑谈价值观/" class="leancloud_visitors" data-flag-title="笑谈价值观">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<br>
<div class="art_content" style="font-size:15px;letter-spacing:1px;line-height:1.3em;"><h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">读书</h3>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;因为决定了要往前端方向深入发展，所以最近有意识地多阅读《javascript高级程序设计》，翻阅了一遍，初步理解了js的相关基础，例如ECMAScript语法基础，DOM操作，事件，以及现在very popular的Ajax。这本书很基础，对于小白还是挺有用的，里面代码很多，前端知识就是有很多细节需要考虑，当然大部分都是为跨浏览器而操心。把各个知识点绘制成了一张思维导图（见文后链接），我想到我毕业，这个图将会非常庞大，看着它来回忆知识，简直是一种享受。</p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">其他思考</h3>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;今天从图书馆走回宿舍的时候，在想，我为什么会那么看重面试官的话呢，也许是因为我认为这很重要。自己要找一个好工作，让自己将来衣食无忧，有一个好的前途，能承担家庭的责任。突然意识到，这就是价值观啊，你认为很重要的东西，就是在苦苦追寻的，引导着我们前行的因素。人生第一次思考什么是自己的价值观，我之前被人说过与之价值观不同，当时我还不太清楚什么是价值观。既然有价值的就是重要的，于是我试着去问同学，你认为重要的东西是什么？我得到一个回答： 健康快乐咯。很像那句经典台词：</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">
<p>&nbsp;做人嘛，最重要的就是开心咯(用粤语会更有感觉)</p>
<p>&nbsp; It's important for me, so it is valuable.有没有道理呢？</p>
</blockquote>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;的确，做人，最重要的是开心。做让自己觉得开心的事，例如努力实现自己的梦想，追求自己想要的生活，和喜欢的人们在一起。这很多时候都是需要follow heart。当你认为一个东西重要的时候，这个就成了价值重要的，这个观念就会影响我们的行为。</p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;人一生都在追求着这么几件事：健康，富有，有用，being good，自由，亲情，爱情 等。这些东西能够让人们感到幸福，既然这样，那就不奇怪现在更富足的人们并不一定有更强的幸福感，因为物质丰富了，却失去了很多其他重要的东西例如健康。人被感动，是因为共鸣，因为你看到别人的身体或者你的思想（被自己感动）里有你的影子，有你觉得重要的东西，勇敢追求喜欢的人时会有，历尽艰辛后流下欢欣的泪水是会有，丧失至爱的亲友或宠物时会有，听到那动人旋律音乐时会有。。。</p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;想清楚这些就好办了，你对你觉得重要的东西都会动情。所以人的 喜，怒，哀，乐 都说明那东西是你看重的。前几天看过《致我们终将逝去的青春》里面，郑薇一开始对陈孝正大光其火，却渐渐喜欢上人家了，怒也是会转移的，从那件让人觉得愤怒的事情，慢慢演变成这个人对我很重要，是很微妙的。看到一个人/物很高兴，而快乐对你也是重要的，那么这个人/物就变重要了。又比如，一个程序员编程，解决了一个难题，倍有成就感，然后就会变得更喜欢编程。其实人的一生，又何尝不是为了这个问题在奔忙思索——什么是重要的，我怎样得到对我重要的人/物。</p>
<p style="font-family:'Times New Roman';"></p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">决定你的选择</h3>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;既然，明确了自己的价值观，那么遇到自己高兴/愤怒/哀伤/快乐的时候，你就知道什么对你是重要的了，当然很多时候让你有这些情绪的东西不一定是你想要继续追求的，但是一旦确定了自己的价值观，那么就大胆地去追寻吧。最近我还有一个小小的感慨：</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">
<p>&nbsp;&nbsp;&nbsp;&nbsp;选择和努力一样重要</p>
</blockquote>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;在没有确定什么是重要的，符合自己价值观的时候，不要轻易做决定，但是也不能逃避做决定（人的大脑很不擅长做决策）。错误的决定，往往决定接下来你是不是要花更多的力气弯路回到大路上来，也决定你路上遇到的人，所以做决定要慎之又慎。除了情绪上的直觉外，也要对事情做理性的思考(例如遇到骗子送上门的“好事”)，对于不太可能的，对长远追求不利的选择，要学会放弃，不要过于我执。</p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">END</h3>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;保持身心的健康快乐是非常重要的事情！做一个有用的人也是非常重要的！前者是对自己负责，后者是对社会负责。</p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">&nbsp; &nbsp;by bibodeng &nbsp;2013-05-11</p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">&nbsp;我的思维导图：&nbsp;<a href="http://vdisk.weibo.com/s/B339N" target="_blank">下载</a></p>
<p style="font-family:'Times New Roman';"></p>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/05/09/带微信功能的sae博客/" itemprop="url">
                  带微信功能的sae博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-05-09T17:21:34+08:00" content="2013-05-09">
              2013-05-09
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/05/09/带微信功能的sae博客/" class="leancloud_visitors" data-flag-title="带微信功能的sae博客">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<div class="art_content" style="font-size:15px;letter-spacing:1px;line-height:1.3em;"><h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">﻿准备</h3>
<p style="font-family:'Times New Roman';">在安装之前，需要准备好博客系统的源代码（含微信响应功能，使用python为sae定制），这可以从github上下载：</p>
<p style="font-family:'Times New Roman';">pyweixin_saelog:&nbsp;</p>
<p style="font-family:'Times New Roman';">会用git的同学可以直接cd到想要放置的命令，如/home/bibodeng/git/下，然后在终端运行如下命令：</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';"><p>git clone https://github.com/bibodeng/pyWeiXin_SAElog.git</p>
</blockquote>
<p style="font-family:'Times New Roman';">&nbsp;如果不会用git的同学，就到<a href="https://github.com/bibodeng/pyWeiXin_SAElog/blob/master/pyweixin_saelog.zip" target="_blank">这里</a>下载压缩包(直接点view raw下载)，解压缩到你想要的任意文件夹下。接下来就进入配置与部署过程。</p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">安装过程</h3>
<h4 style="font-family:'Times New Roman';">配置</h4>
<p style="font-family:'Times New Roman';"><span style="font-size:16px;">修改 /config.yaml 把 name:&nbsp;<strong>appname</strong></span><span style="font-size:16px;">&nbsp;改为自己的appname，如scnuwriter；<br>
修改 setting.py 的相关设置，每项后面都有说明,包括邮箱，还有数据库密码等。</span></p>
<p style="font-family:'Times New Roman';"><span style="font-size:16px;">还有如果不想把自己的博客设为debug状态，可以在</span><span style="font-size:16px;">index.wsgi文件setting里面，将debug选项改成false。</span></p>
<h4 style="font-family:'Times New Roman';"><span style="font-size:16px;">部署</span></h4>
<p style="font-family:'Times New Roman';"><span style="font-size:16px;">接下来<br>
到SAE 后台开通相关服务（mysql/Storage/Memcache/Task Queue）<br>
这些服务SAE 是不会自己开通，需要到后台手动完成：<br>
</span></p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';"><p><span style="font-size:16px;"># 1 初始化 Mysql （这是必要的）<br>
# 2 建立一个名为&nbsp;</span><strong>attachment</strong>的 Storage （发帖时上传图片或附件用的）<br>
# 3 启用Memcache，初始化大小为<strong><span style="font-size:16px;">1M</span></strong><span style="font-size:16px;">&nbsp;的 mc，大小可以调，日后文章多了，PV多了可酌情增加，让你的博客响应更快。<br>
# 4 创建一个 名为&nbsp;</span><strong><span style="font-size:16px;">default</span></strong><span style="font-size:16px;">&nbsp;的 Task Queue 这个是用来做发提醒邮件，选择</span><strong><span style="font-size:16px;">顺序队列</span></strong><span style="font-size:16px;">&nbsp;等级 为</span><strong><span style="font-size:16px;">1</span></strong></p>
&nbsp;</blockquote>
<p style="font-family:'Times New Roman';"><span style="font-size:16px;">打包程序，在SAE 后台通过打包上传代码,注意压缩包下面必须是所有的目录与文件，因为上传展开的是压缩包内的结构；</span><span style="font-size:16px;">打开 http://your_app_id.sinaapp.com/install 如果出错刷新两三次就可以，</span><span style="font-size:16px;">提示要输入管理员帐号。</span></p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">结果</h3>
<p style="font-family:'Times New Roman';">就这样你的带微信响应功能的博客就搭好了，如果还没有微信的公众号，赶紧去 微信 申请一个吧，然后将blog里面的微信地址填到开发模式的url和token里面，token默认为bibodeng，可以到源代码下察看blog.py源文件下的TOKEN全局变量的值,甚至可以自行修改。默认的如下：</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';"><p>url：<a href="http:" target="_blank"></a><a href="http://your_app_id/" target="_blank"></a><a href="http://your_app_id.sinaapp.com/weixin" target="_blank">http://your_app_id.sinaapp.com/weixin</a></p>
<p>token：bibodeng</p>
</blockquote>
<p style="font-family:'Times New Roman';">点击验证，通过后启用开发者模式就可以让你的博客响应微信用户的请求了，可以把你的微信公众帐号推广给其他人，这里就不详述了。enjoy it !</p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">END</h3>
<p style="font-family:'Times New Roman';">&nbsp;参考链接：&nbsp;<a href="http://saepy.sinaapp.com/topic/50/saepy-log-v0-0-2-%E4%BD%BF%E7%94%A8%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97" target="_blank">SAEpy-log安装指南</a>&nbsp;&nbsp;本文有部分内容引用于此</p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">by bibodeng 2013-05-09</p>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/05/08/微信公众开发——实现功能/" itemprop="url">
                  微信公众开发——实现功能
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-05-08T17:08:04+08:00" content="2013-05-08">
              2013-05-08
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/05/08/微信公众开发——实现功能/" class="leancloud_visitors" data-flag-title="微信公众开发——实现功能">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<div class="art_content" style="font-size:15px;letter-spacing:1px;line-height:1.3em;"><h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">承启</h3>
<p style="font-family:'Times New Roman';">&nbsp;因为之前设计了要实现一个微信机器人，以向用户响应响应的文章，这个app十分地简单，并不需要特别深入的设计，而且我的想法是：拿来主义， 反正github上面那么多的用python写的博客系统，我只需要实现微信响应的部分，也就是从数据库中获取文章的数据，然后将文章的标题，url，图片等信息打包成xml格式返回给微信服务器，服务器再返回给用户。而且我发现，有菜单的会好很多，就像一个完整的app，可以直接点击察看某篇文章，而不是硬邦邦的回复。我是用别人写的一个博客系统进行改造——<a href="https://github.com/ego008/saepy-log" target="_blank">saepy-log</a>.而这个博客系统又是基于tornado框架的，本来不打算染指tornado的，但是不得不硬着头皮钻研。其中遇到了很多困难，在sql语句的like写法，察看文档方面有了比较大的收获。</p>
<p style="font-family:'Times New Roman';"></p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">部署与开发</h3>
<p style="font-family:'Times New Roman';">&nbsp;事先说明，由于我是各种折腾，所以可能照本篇文章做是做不成的。下载了saepy-log的源码后，按照<a href="http://saepy.sinaapp.com/topic/50/SAEpy-logv0.0.2%E4%BD%BF%E7%94%A8%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97" target="_blank">这里</a>的操作进行上传后，就可以将博客系统安装在sae平台上了，然后用svn把代码同步下来到本地工作目录，一切准备就绪。我们会看到我们的博客已经可以访问了，而且我们本地还有博客的所有代码：</p>
<p style="font-family:'Times New Roman';"><img src="http://note.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/48a8ea30-42f1-29f2-8699-0c8602a3df0a.7064/index_files/5563e0e188ffbfb82f3ae90d59cb5a14.png"></p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">我们要修改的是blog.py是博客的核心功能所在，还有modle.py是数据模型的关键所在，我们将要扩展数据模型功能，使之完成我们的微信功能。</p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">在blog.py里面添加我们的微信功能类 weixin.py(由于是用tornado框架，所以方法与在django里面略有不同):</p>
<p style="font-family:'Times New Roman';">导入需要用到的包</p>
<pre class="brush:python;toolbar:false;"># weixin used package
import xml.etree.ElementTree as ET  
import urllib,urllib2,time,hashlib
                                       
import tornado.wsgi
import tornado.escape</pre><p style="font-family:'Times New Roman';">主要是xml的解析和一些处理字符串的包，接下来我们定义weixin类的主体：</p>
<pre class="brush:python;toolbar:false;"># 添加微信推送帐号
class WeiXinPoster(BaseHandler):
    #-----------------------------------------------------------------------
    # 处理get方法 对应check_signature
    def get(self):
        global TOKEN  
        signature = self.get_argument("signature")
        timestamp = self.get_argument("timestamp")
        nonce = self.get_argument("nonce")
        echoStr = self.get_argument("echostr")
        token = TOKEN  
        tmpList = [token,timestamp,nonce]  
        tmpList.sort()  
        tmpstr = "%s%s%s" % tuple(tmpList)  
        tmpstr = hashlib.sha1(tmpstr).hexdigest()
                                      
        if tmpstr == signature: 
            self.write(echoStr) 
            #return echoStr
        else:  
            self.write(None);
            #return None
                                                  
    # 处理post方法,对应response_msg
    def post(self):
        global SORRY
        # 从request中获取请求文本
        rawStr = self.request.body
        # 将文本进行解析,得到请求的数据
        msg = self.parse_request_xml(ET.fromstring(rawStr))
        # 根据请求消息来处理内容返回
        query_str = msg.get("Content")
        query_str = tornado.escape.utf8(query_str)
        # TODO 用户发来的数据类型可能多样，所以需要判别
        response_msg = ""
        return_data = ""
        # 使用简单的处理逻辑，有待扩展
        if query_str[0] == "h":     # send help menu to user
            response_msg = self.get_help_menu()     # 返回消息
            # 包括post_msg，和对应的 response_msg
            if response_msg:
                return_data = self.pack_text_xml(msg, response_msg)
            else:
                response_msg = SORRY
                return_data = self.pack_text_xml(msg, response_msg)
            self.write(return_data)
        # 分类
        elif query_str[0] =="c":
            category = query_str[1:]
            response_msg = self.get_category_articles(category)
            if response_msg:
                return_data = self.pack_news_xml(msg, response_msg)
            else:
                response_msg = SORRY
                return_data = self.pack_text_xml(msg, response_msg)
            self.write(return_data)
        # 列出文章列表    
        elif query_str[0] =="l":
            response_msg = self.get_article_list()
            if response_msg:
                return_data = self.pack_text_xml(msg, response_msg)
            else:
                response_msg = SORRY
                return_data = self.pack_text_xml(msg, response_msg)
            self.write(return_data)
        # 直接获取某篇文章  
        elif query_str[0] == "a":
            # 直接获取文章的id，然后在数据库中查询
            article_id = int(query_str[1:])
            # 进行操作
            response_msg = self.get_response_article_by_id(article_id)
            if response_msg:
                return_data = self.pack_news_xml(msg, response_msg)
            else:
                response_msg = SORRY
                return_data = self.pack_text_xml(msg, response_msg)
            self.write(return_data)
                                                  
        # 还要考虑其他
        elif query_str[0] == "s":
            keyword = str(query_str[1:])
            # 搜索关键词，返回相关文章
            response_msg = self.get_response_article(keyword)
            # 返回图文信息
            if response_msg:
                return_data = self.pack_news_xml(msg, response_msg)
            else:
                response_msg = SORRY
                return_data = self.pack_text_xml(msg, response_msg)
            self.write(return_data)
                                                  
        elif query_str[0] == "n":
            response_msg = self.get_latest_articles()
            # 返回图文信息
            if response_msg:
                return_data = self.pack_news_xml(msg, response_msg)
            else:
                response_msg = SORRY
                return_data = self.pack_text_xml(msg, response_msg)
            self.write(return_data)
        # 如果找不到，返回帮助信息
        else:
            response_msg = get_help_menu()
            if response_msg:
                return_data = response_msg
            else:
                return_data = SORRY
            self.write(return_data)
    # n for 获取最新的文章
    def get_latest_articles(self):
        global MAX_ARTICLE
        global PIC_URL
        article_list = Article.get_articles_by_latest()
        article_list_length = len(article_list)
        count = (article_list_length &lt; MAX_ARTICLE) and article_list_length or MAX_ARTICLE
        if article_list:
            # 构造图文消息
            articles_msg = {'articles':[]}
            for i in range(0,count):
                article = {
                        'title': article_list[i].slug,
                        'description':article_list[i].description,
                        'picUrl':PIC_URL,
                        'url':article_list[i].absolute_url
                    }
                # 插入文章
                articles_msg['articles'].append(article)
                article = {}
            # 返回文章
            return articles_msg
                                          
    #-----------------------------------------------------------------------
    # 解析请求,拆解到一个字典里        
    def parse_request_xml(self,root_elem):
        msg = {}
        if root_elem.tag == 'xml':
            for child in root_elem:
                msg[child.tag] = child.text  # 获得内容  
            return msg
                                      
    #-----------------------------------------------------------------------
    def get_help_menu(self):
        menu_msg = '''欢迎关注南苑随笔，在这里你能获得关于校园的资讯和故事。回复如下按键则可以完成得到相应的回应
        h ：帮助(help)
        l ：文章列表(article list)
        f : 获得分类列表
        n : 获取最新文章
        a + 数字 ：察看某篇文章 a2 察看第2篇文章
        s + 关键字 : 搜索相关文章 s科研 察看科研相关
        c + 分类名 ： 获取分类文章 c校园生活 察看校园生活分类
        其他 ： 功能有待丰富'''
        return menu_msg
    #-----------------------------------------------------------------------
    # 获取文章列表
    def get_article_list(self):
        # 查询数据库获取文章列表 
        article_list = Article.get_all_article_list()
        article_list_str = "最新文章列表供您点阅，回复a+数字即可阅读: \n"
        for i in range(len(article_list)):
            art_id = str(article_list[i].id)
            art_id = tornado.escape.native_str(art_id)
                                                  
            art_title = article_list[i].title
            art_title = tornado.escape.native_str(art_title)
                                                  
            art_category = article_list[i].category
            art_category = tornado.escape.native_str(art_category)
                                                  
                                                  
            article_list_str +=  art_id + ' ' + art_title + ' ' + art_category + '\n'
        return article_list_str
                                              
    # 按照分类查找
    def get_category_articles(self, category):
        global MAX_ARTICLE
        global PIC_URL
        article_list = Article.get_articles_by_category(category)
        article_list_length = len(article_list)
        count = (article_list_length &lt; MAX_ARTICLE) and article_list_length or MAX_ARTICLE
        if article_list:
            # 构造图文消息
            articles_msg = {'articles':[]}
            for i in range(0,count):
                article = {
                        'title': article_list[i].slug,
                        'description':article_list[i].description,
                        'picUrl':PIC_URL,
                        'url':article_list[i].absolute_url
                    }
                # 插入文章
                articles_msg['articles'].append(article)
                article = {}
            # 返回文章
            return articles_msg
    #-----------------------------------------------------------------------
    # 获取用于返回的msg
    def get_response_article(self, keyword):
        global PIC_URL
        keyword = str(keyword)
        # 从数据库查询得到若干文章
        article = Article.get_article_by_keyword(keyword)
        # 这里先用测试数据
        if article:
            title = article.slug
            description = article.description
            picUrl = PIC_URL
            url = article.absolute_url
            count = 1
            # 也有可能是若干篇
            # 这里实现相关逻辑，从数据库中获取内容
                                                  
            # 构造图文消息
            articles_msg = {'articles':[]}
            for i in range(0,count):
                article = {
                        'title':title,
                        'description':description,
                        'picUrl':picUrl,
                        'url':url
                    }
                # 插入文章
                articles_msg['articles'].append(article)
                article = {}
            # 返回文章
            return articles_msg
        else:
            return
                                          
    def get_response_article_by_id(self, post_id):
        global PIC_URL
        # 从数据库查询得到若干文章
        article = Article.get_article_by_id_detail(post_id)
        # postId为文章id
        if article:
            title = article.slug
            description = article.description
            picUrl = PIC_URL
            url = article.absolute_url
            count = 1
            # 这里实现相关逻辑，从数据库中获取内容
                                                  
            # 构造图文消息
            articles_msg = {'articles':[]}
            for i in range(0,count):
                article = {
                        'title':title,
                        'description':description,
                        'picUrl':picUrl,
                        'url':url
                    }
                # 插入文章
                articles_msg['articles'].append(article)
                article = {}
            # 返回文章
            return articles_msg
        else:
            return</pre><p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">&nbsp;可见app的难度并不大，还是和上次<a href="/?post=109" target="_blank">使用微信API</a>里面的和接近，需要用到的几个全局变量，需要自己定义，如token，如PIC_URL等。程序原理其实就是解析用户请求，h开头，则提供帮助菜单，a开头加数字的，就提供某篇文章，等等，然后提供相应的函数进行处理，这里面说明起来比较复杂，就以获取分类文章来讲吧：</p>
<p style="font-family:'Times New Roman';">需要用到分析用户请求字符串：</p>
<pre class="brush:python;toolbar:false;"># 分类
        elif query_str[0] =="c":
            category = query_str[1:]
            response_msg = self.get_category_articles(category)
            if response_msg:
                return_data = self.pack_news_xml(msg, response_msg)
            else:
                response_msg = SORRY
                return_data = self.pack_text_xml(msg, response_msg)
            self.write(return_data)</pre><p style="font-family:'Times New Roman';">这里要提供get_category_articles(category)的功能，所以需要在weixin类里面实现一个这样的函数：</p>
<pre class="brush:python;toolbar:false;"># 按照分类查找
    def get_category_articles(self, category):
        global MAX_ARTICLE
        global PIC_URL
        article_list = Article.get_articles_by_category(category)
        article_list_length = len(article_list)
        count = (article_list_length &lt; MAX_ARTICLE) and article_list_length or MAX_ARTICLE
        if article_list:
            # 构造图文消息
            articles_msg = {'articles':[]}
            for i in range(0,count):
                article = {
                        'title': article_list[i].slug,
                        'description':article_list[i].description,
                        'picUrl':PIC_URL,
                        'url':article_list[i].absolute_url
                    }
                # 插入文章
                articles_msg['articles'].append(article)
                article = {}
            # 返回文章
            return articles_msg</pre><p style="font-family:'Times New Roman';">很显然，这里需要和数据库模型Article打交道，看看Article是否实现了该功能，很遗憾没有，那么我们只好卷起袖子自己干——扩展Article,所以我们转战到modle.py文件里面了，写下了如下的代码：</p>
<pre class="brush:python;toolbar:false;"># 返回一个包含若干篇文章的数组 limit 5
    def get_articles_by_category(self, category):
        sdb._ensure_connected()
        article_list = sdb.query('SELECT * FROM `sp_posts` WHERE `category` = %s LIMIT 5', str(category))
        for i in range(len(article_list)):
            article_list[i] = post_detail_formate(article_list[i])
        return article_list</pre><p style="font-family:'Times New Roman';">这里进行了数据库查询，将category参数传递进去，选择category为参数的5篇文章，打包返回。post_detail_formate是博客系统已经写好的，我们只要拿来用就行了。在python里面，写sql语句要很小心，遇到要传入参数的，最好是用逗号分割开，而不是使用%来填充参数。特别是使用like的时候，我们往往需要写这样的sql语句：</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';"><p>SELECT * FROM `sp_posts` WHERE `category` LIKE '%study%'</p>
</blockquote>
<p style="font-family:'Times New Roman';">&nbsp;但是python里面又是用%s做参数占位符的，故而会引起很多不必要的错误，比如<a href="http://stackoverflow.com/questions/2097475/how-to-safely-generate-a-sql-like-statement-using-python-db-api" target="_blank">这里</a>。总之要安全使用，最好是作为参数传递，python会为他们与原字符串里的%等分开。</p>
<p style="font-family:'Times New Roman';"></p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">上传发布</h3>
<p style="font-family:'Times New Roman';">完成功能后就可以发布了，虽然还有很多不足的地方，但是测试发现，还是可以使用的。本项目将开源到github中，欢迎使用（需要修改部分的参数，例如博客名称等），或者交流研究源代码。实现后的功能是这样字的：</p>
<p style="font-family:'Times New Roman';"><img src="http://note.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/48a8ea30-42f1-29f2-8699-0c8602a3df0a.7064/index_files/42292137d77242164a4707ba50cf9410.jpg"><img src="http://note.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/48a8ea30-42f1-29f2-8699-0c8602a3df0a.7064/index_files/1dc8e6defb343317df105528dd724f2e.jpg"></p>
<p style="font-family:'Times New Roman';">比如回复一个a9,将返回第9篇文章；回复l,列出所有文章。吐槽一下我们宿舍的网络，差到离谱，我是获取信息之后才截屏的。</p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';">该篇并不是要将实现的所有细节披露出来，披露细节最好的方法就是公开源代码，接下来会发布到github上面去，只需稍微配置，你就可以拥有一个可以推送到微信的博客了（我不会告诉你wordpress早就出微信插件了）。经过这一番折腾，可以得出一个微信第三方开发的经验，那就是初步制定好自己的app需要提供什么功能，然后接着设计一个类，处理各种的请求，将各种处理部分封装起来，例如按照分类获取文章，或者获取文章列表等，然后在这里面调用数据库模型里面的功能来实现。这是MVC的一种便利之处。此外，还要勇于阅读源代码和英文文档，我之前google了很多字符串转换编码的方法，没有成功，但是阅读了tornado的文档之后，我恍然大悟。例如之前在django里面写这个应用的时候，我们获取的还是request.raw_post_data,现在改成了self.request.body，不看文档，想破头也想不出来。功能实现虽然告一段落，但是这个项目还有很多需要重写一次，使得它的表现更好，安全性更高。这里不得不提一下，服务器中采用tornado真的不是一般快~</p>
<p style="font-family:'Times New Roman';"></p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">END</h3>
<p style="font-family:'Times New Roman';">by bibodeng 2013-05-08</p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';"></p>
<p style="font-family:'Times New Roman';"></p>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/05/05/本科学习的困境/" itemprop="url">
                  本科学习的困境
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-05-05T14:00:43+08:00" content="2013-05-05">
              2013-05-05
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/05/05/本科学习的困境/" class="leancloud_visitors" data-flag-title="本科学习的困境">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<span style="font-family:'Times New Roman';font-size:medium;line-height:normal;">﻿﻿</span><div class="art_content" style="font-size:15px;letter-spacing:1px;line-height:1.3em;font-family:'Times New Roman';"><h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;">遇到的困境</h3>
<p style="margin-top:0px;margin-bottom:0px;">大学本科真​的学的很疲惫，但是最终却发现自己于企业的要求还有一定差距。</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;"><p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;">缺乏对知识的深刻理解，还没有达到悟的境界。也许说的有点过激，但是一些课程念ppt就能让学生对知识印象深刻，这是不可能的。而且四年的课程，有许多是你不想上的，而且最后一年是找实习的时间，所以基本还是靠自己在课余求学。&nbsp;</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
</blockquote>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;">两种选择</h3>
<h4>学术化</h4>
<p style="margin-top:0px;margin-bottom:0px;">即在学科基础理论上面扎实功夫，其实一个学科，在本科阶段，真正核心的课程就那么几门，以计算机科学来说，最基础的是数据结构，算法，操作系统等等，每一门功课，里面都有很多值得深入思考的地方。而且往往将来使用的很多的技术，就是这些所发展而来的。例如，数据结构里面的二叉树，假如某公司里面要求你对用户进行搜索，且数据量是1亿级，对于性能要求很高。那么怎样建立一个高效的数据结构，设计算法，都是很有讲究的。在学校里面，总有那么几个人对于理论理解很深刻，将来他们也有可能走学术道路，去更高的平台去学习。在大学期间，如果没有阅读过原始论文，那么我们缺乏学术精神，要深刻理解，就要拿原著来啃。而且学得泛泛的人，不能在某一个领域超越大多数人，而要精通，则必须知道来龙去脉。那些经典，之所以为经典，是因为他们讲清楚了是什么，为什么，这难能可贵。有一个很外在的属性来评判经典，那就是“厚度”，因为要讲清楚一件事情，是要费些笔墨的。《算法导论》，《csapp》等都是大砖头。</p>
<h4>技能化</h4>
<p style="margin-top:0px;margin-bottom:0px;">在某一门技能上面深入学习，掌握某项开发技术。在本科中，我们会接触很多的技术，linux系统编程，web前端后台，数据库，ios开发，android开发等等。实在是太多了，而每一门要达到精通非三五年不可。根据一万小时天才理论，我们本科四年4年*200天*10小时才勉强能够成为一个准天才，但是很显然这需要极大的勤奋刻苦。大部分人是做不来的，而且如今技术繁杂，每一门都需要好几年才能达到出神入化的境界。本科就这么多时间，故而需要选择一门最适合自己的，自己最感兴趣的来发展。很多东西，我们只是到达了会用的地步，但是知道怎么用，并不会让你做出优秀的作品，于是你需要阅读更多大师的作品，继承他们的智慧精华。这其中学校的培养和企业的需求有挺大的差别，但是学习能力强的人，在课外自己都会去探索。如一个程序员说的，你要超越你这个领域的80%的人，你不能永远是初级程序员，当然这需要时间的沉淀。</p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;">一点看法</h3>
<h4>设置预科——针对专业人才的浪费</h4>
<p style="margin-top:0px;margin-bottom:0px;">高校是培养精英人才的地方，但是由于一开始没有选择合适的专业导致浪费了一年，四年或者一生。人就应该做自己最感兴趣，最擅长，最容易成功的事情。而很多人被调配到这个专业来，浪费了他们的时间，也浪费了老师的资源。很大原因是因为他们根本不了解他们的专业，更加不了解他们想要什么，所以大学第一年，应该给他们机会见识，尝试，以及选择。让一切人才的源泉充分涌流。不明确，足以毁掉一切。混乱和无需是禁锢人们思想的枷锁，所谓自由，就是在混乱中创造秩序。你清楚地知道自己想学习什么，应该怎么学习，剩下的就是行了。王阳明说“知行合一”，笔者是极为赞同的，也尽力向这方面靠拢。</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
<h4>培养具有钻研精神的学生</h4>
<p style="margin-top:0px;margin-bottom:0px;">即使是想学本专业的同学，也只有少数是优秀的，极少数是卓越的。而做学术或者做产品，都极其需要卓越的人才，像一般的人，本身没有下功夫，也没有得到某种启发和培养。所以丧失了变得卓越的机会。不可否认，高校里面很多在中学都是佼佼者，天之骄子。正如那句“大学出人才，也出人渣”，很多人的思想，道德，才能都在大学里面消磨殆尽了。庸人有两种，一种是懒惰，一种是骄傲。聪明的学生得不到启发，就渐渐变得平庸，就老师指导学生做项目而言，导师只是布置下来任务，在过程中于方向，方法全然予以指导，碰壁很多，这难免会消耗学生的耐心。大学里面有太多我们不愿意做的，却不得不做的事情，而想钻研的人得不到指导，可谓是困顿十足。偶尔得到一两个亦师亦友的师兄，很幸运，也能学到不少东西。所以这其中缺乏的是一种传承的“血脉”，不注重传承，往往就浪费了许许多多的资源。轮子继续重造，错误继续重复，学生的钻研精神都用在了一些方法方向的疑惑上。现在，那些本身对于计算机科学很感兴趣的同学，现在也要考虑计算机到底是不是真爱了。氛围很重要，让一切轻松起来才是正经事。最后，最重要的，爱钻研的学生都很勤奋练习，他们看更多书，写更多程序，更多接触牛人。</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;">勤奋，靠真理更近一点</p>
<p style="margin-top:0px;margin-bottom:0px;">传承，靠真理更近一点</p>
<p style="margin-top:0px;margin-bottom:0px;">思考，靠真理更近一点</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;">by bibodeng&nbsp;2013-05-05</p>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/04/24/专注前端开发/" itemprop="url">
                  专注前端开发
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-04-24T20:32:59+08:00" content="2013-04-24">
              2013-04-24
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/04/24/专注前端开发/" class="leancloud_visitors" data-flag-title="专注前端开发">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<style type="text/css" _ue_org_tagname="style"></style>
<style type="text/css" _ue_org_tagname="style"></style>
<link type="text/css" rel="stylesheet" href="http://bibodeng.web-149.com/content/plugins/bibo_mark/article_bibo.css"> <div class="art_content">
    <p>
                2013-04-23 8:56:24    
    </p>
    <h3>
                写在前面    
    </h3>
    <p>
                上次“第一次面试”的时候，我的面试官告诉我：“你东西是有了，但是不够专”，其实之前我还在犹豫是走前端还是服务器道路，现在狠下心来，专注于前端开发，埋头理解前端原理，性能优化，高质量代码编写等。故而我找来了几本书——web前端修炼之道/HTML5/性能优化最佳实践。还好，我懂得怎么去找比较好的博客和书籍来看，去成为一个卓越的前端工程师。我想现在还来得及，至少确定了自己努力的方向，接下来的事情就好办了。之前在写ugeek GTD的时候，由于缺乏经验，一开始缺乏设计，写的代码乱七八糟，真的可以用惨不忍睹来形容，后来重写了一次，就好多了，看起来API很有规律，对我后来的开发很有好处。现在看来，大学期间需要折腾一些东西，折腾也要有方法，给自己一个期限，尽量在这个期限内弄懂一个知识点，找最好的博客，最好的书籍，吃透它。且不要太着急地写应用，做项目，做的再多，是错的，也没啥意义，当然在学习的过程中还是要动手做练习的。    
    </p>
    <p>
        <br>
    </p>
    <h3>
                深入前端    
    </h3>
    <p>
                需要准备哪些知识：看图<br>
    </p>
    <p>
                百度百科-前端知识结构：<br>
    </p>
    <p>
        <img src="http://note.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/338bef13-6548-de07-2686-f505ae80d40e.6201/index_files/6df244913a76be4c540a9908f5542e98.jpg"><br>
    </p>
    <p>
                再看一个更加全面的：    
    </p>
    <p>
        <img src="http://note.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/338bef13-6548-de07-2686-f505ae80d40e.6201/index_files/5c31f8ed0d49fe5076cdfd9c0acbc2a6.jpg"><br>
    </p>
    <p>
        <br>
    </p>
    <p>
                adang哥的《web前端开发修炼之道》里面说：“精一行，通十行”，干前端的要懂很多东西，例如服务器编程，svn，算法数据结构，css/html/js更加是不用说了。我自己是在大学里正儿八经学习C/C++成长起来的程序员，是因为搞过一两个web应用，什么都要自己动手，接触了python，php等服务器端脚本语言，django，thinkphp等服务器端框架。当然，又要自己设计页面，P图，写html/CSS，当然还有js。一下子干这么多，肯定会有很多东西不精，所以也抗不起面试官几次问。如果要去大公司，是要做“最好的螺丝钉”，所以最好专注特定的一个领域。很显然，学校的教育和企业的需求还是相差很大的。攒的一些项目经验都是课余时间写的，正经觉得比较有用的都是那些基础原理课（数据结构/算法），真心觉得，能达到tencent要求的都是神人。现在也没什么好说的，老老实实啃书，下面是小倪哥的推荐书单：    
    </p>
    <p style="text-align:left;">
        <img src="http://note.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/338bef13-6548-de07-2686-f505ae80d40e.6201/index_files/07e4b91b93ab14695183fd55582fb526.png">     </p>
    <p>
                看到这个的时候，我想起了陈近南的一句话“这只是武林秘籍的目录，那堆才是绝世武功的书”，老实说，还没有正式学过js的我，知道有的学了。我想十年才能说是小有所成吧。最重要的大家都很急躁，想要一步登天，谁知道徒添焦虑，要明白，最重要的是修炼功夫。    
    </p>
    <p>
        <br>
    </p>
    <h3>
                推荐阅读    
    </h3>
    <h4>
                浏览器渲染过程    
    </h4>
    <p>
                特别针对浏览器的原理，与服务器的交互，怎样写出高效的css和js代码。例如，浏览器是怎样处理文档的，其大概过程如下：<br>
    </p>
    <ol style="list-style-type:decimal;" class=" list-paddingleft-2">
        <li>
            <p>
                <br>
            </p>
        </li>
        <li>
            <p>
                                解析文档            
            </p>
        </li>
    </ol>
    <ul class=" list-paddingleft-2">
        <li>
            <p>
                                根据文档构建DOM树            
            </p>
        </li>
    </ul>
    <ul class=" list-paddingleft-2">
        <li>
            <p>
                                根据CSS构建渲染树            
            </p>
        </li>
    </ul>
    <ul class=" list-paddingleft-2">
        <li>
            <p>
                                绘制图像            
            </p>
        </li>
    </ul>
    <ol class=" list-paddingleft-2">
        <li>
            <p>
                <br>
            </p>
        </li>
    </ol>
    <p>
                  可以参考：<a href="http://www.smallni.com/css-performance-from-the-browsers-rendering/" target="_blank">浏览器渲染过程</a>     </p>
    <p>
        <br>
    </p>
    <h4>
                浏览器重排与重绘    
    </h4>
    <p>
                而对于浏览器的重绘和重排问题，又有许多值得研究的东西，写的js，如果做少传送数据，还要做到少改动DOM树，避免频繁的重绘和重排。重绘可能是一些css属性的改变，重排则是文档结构的改变，有时候DOM改变或者元素大小改变了，会影响到布局，所以要重排，而且肯定要重绘。具体可可以参考：<a href="http://kb.cnblogs.com/page/169820/" target="_blank">浏览器重绘与重排</a>     </p>
    <p>
        <br>
    </p>
    <h4>
                原生ajax    
    </h4>
    <p>
                还有一个我注意到的问题是ajax的实现，我记得面试官叫我写一个ajax，我以为是用jquery写，所以就写了个$.ajax（url, arg, callback_function(){}）之类的东西，现在想起来，面试官应该是在考我原生的ajax是怎样的，后来我google一番，才知道是一个xmlHttpRequest，然后发送请求到url中，设置回调函数，发送请求，最后得到响应，参考<a href="http://www.smallni.com/ajax-demo/" target="_blank">ajax实现步骤</a>。    
    </p>
    <p>
        <br>
    </p>
    <p>
                看了一些这样的博文，我才知道要深入web前端，还要学习很多的东西，但是现在看来还不晚，还有一年的时间，扎实这些基础。    
    </p>
    <h3>
                友情链接    
    </h3>
    <p>
                汤姆大叔 <a href="http://www.cnblogs.com/TomXu/archive/2012/07/26/2581268.html" target="_blank"></a><a href="http://www.cnblogs.com/TomXu/archive/2012/07/26/2581268.html" target="_blank">http://www.cnblogs.com/TomXu/archive/2012/07/26/2581268.html</a>     </p>
    <p>
                叶小杈 <a href="http://www.cnblogs.com/yexiaochai/" target="_blank"></a><a href="http://www.cnblogs.com/yexiaochai/" target="_blank"></a><a href="http://www.cnblogs.com/yexiaochai/" target="_blank">http://www.cnblogs.com/yexiaochai/</a>     </p>
    <p>
                腾讯小倪 <a href="http://www.smallni.com/" target="_blank"></a><a href="http://www.smallni.com/" target="_blank">http://www.smallni.com/</a>     </p>
    <p>
        <a href="http://www.smallni.com/" target="_blank"></a>web前端网址导航 <a href="http://www.ux265.net/" target="_blank">http://www.ux265.net/</a><br>
    </p>
    <p>
                李忠谈web从小工到大家 <a href="http://blog.leezhong.com/tech/2010/12/18/web-development-journeyman-master.html" target="_blank">http://blog.leezhong.com/tech/2010/12/18/web-development-journeyman-master.html</a>     </p>
    <p>
        <br>
    </p>
    <h3>
                END    
    </h3>
    <p>
                找本《javascript 高级程序设计》边儿开看吧。<br>
    </p>
    <p>
                by bibodeng 2013-04-24 20:23:49<br>
    </p>
    <p>
        <br>
    </p>
    <p>
        <br>
    </p>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/04/21/堆排序复习/" itemprop="url">
                  堆排序复习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-04-21T21:58:29+08:00" content="2013-04-21">
              2013-04-21
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/04/21/堆排序复习/" class="leancloud_visitors" data-flag-title="堆排序复习">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">2013-04-21&nbsp;翻阅《算法导论》</p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';letter-spacing:1px;line-height:19.5px;">再谈堆排序</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">堆排序利用的特性——堆的数据结构特征：最大/最小&nbsp;的元素总是在根处取得。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">那么要利用根来排序，我们只需要保持堆的特性，然后每次把最后的元素与根交换，取出根元素就可以了。但是这个过程需要用到整堆，即保证这个数组能够形成堆的特征（这里对最大堆来讲）：父节点总是比子节点要大。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">整堆就是对这种“僭越”的清洗，说起来很残忍，其实就是如果比自己小的占用了上位，则和它交换，这样递归下去，就一定能够让整棵树变得“井井有条”。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">这次我用python来实现一个堆。</p>
<div id="highlighter_209101" class="syntaxhighlighter python" highlighter="brush:python;toolbar:false;" style="font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"><table border="0" cellpadding="0" cellspacing="0" style="clear:both;margin-bottom:10px;word-break:break-all;"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2" style="height:20px;">1</div>
<div class="line number2 index1 alt1" style="height:20px;">2</div>
<div class="line number3 index2 alt2" style="height:20px;">3</div>
<div class="line number4 index3 alt1" style="height:20px;">4</div>
<div class="line number5 index4 alt2" style="height:20px;">5</div>
<div class="line number6 index5 alt1" style="height:20px;">6</div>
<div class="line number7 index6 alt2" style="height:20px;">7</div>
<div class="line number8 index7 alt1" style="height:20px;">8</div>
<div class="line number9 index8 alt2" style="height:20px;">9</div>
<div class="line number10 index9 alt1" style="height:20px;">10</div>
<div class="line number11 index10 alt2" style="height:20px;">11</div>
<div class="line number12 index11 alt1" style="height:20px;">12</div>
<div class="line number13 index12 alt2" style="height:20px;">13</div>
<div class="line number14 index13 alt1" style="height:20px;">14</div>
<div class="line number15 index14 alt2" style="height:20px;">15</div>
<div class="line number16 index15 alt1" style="height:20px;">16</div>
<div class="line number17 index16 alt2" style="height:20px;">17</div>
<div class="line number18 index17 alt1" style="height:20px;">18</div>
<div class="line number19 index18 alt2" style="height:20px;">19</div>
<div class="line number20 index19 alt1" style="height:20px;">20</div>
<div class="line number21 index20 alt2" style="height:20px;">21</div>
<div class="line number22 index21 alt1" style="height:20px;">22</div>
<div class="line number23 index22 alt2" style="height:20px;">23</div>
<div class="line number24 index23 alt1" style="height:20px;">24</div>
<div class="line number25 index24 alt2" style="height:20px;">25</div>
<div class="line number26 index25 alt1" style="height:20px;">26</div>
<div class="line number27 index26 alt2" style="height:20px;">27</div>
<div class="line number28 index27 alt1" style="height:20px;">28</div>
<div class="line number29 index28 alt2" style="height:20px;">29</div>
<div class="line number30 index29 alt1" style="height:20px;">30</div>
<div class="line number31 index30 alt2" style="height:20px;">31</div>
<div class="line number32 index31 alt1" style="height:20px;">32</div>
<div class="line number33 index32 alt2" style="height:20px;">33</div>
<div class="line number34 index33 alt1" style="height:20px;">34</div>
<div class="line number35 index34 alt2" style="height:20px;">35</div>
<div class="line number36 index35 alt1" style="height:20px;">36</div>
<div class="line number37 index36 alt2" style="height:20px;">37</div>
<div class="line number38 index37 alt1" style="height:20px;">38</div>
<div class="line number39 index38 alt2" style="height:20px;">39</div>
<div class="line number40 index39 alt1" style="height:20px;">40</div>
<div class="line number41 index40 alt2" style="height:20px;">41</div>
<div class="line number42 index41 alt1" style="height:20px;">42</div>
<div class="line number43 index42 alt2" style="height:20px;">43</div>
<div class="line number44 index43 alt1" style="height:20px;">44</div>
<div class="line number45 index44 alt2" style="height:20px;">45</div>
<div class="line number46 index45 alt1" style="height:20px;">46</div>
<div class="line number47 index46 alt2" style="height:20px;">47</div>
<div class="line number48 index47 alt1" style="height:20px;">48</div>
<div class="line number49 index48 alt2" style="height:20px;">49</div>
<div class="line number50 index49 alt1" style="height:20px;">50</div>
<div class="line number51 index50 alt2" style="height:20px;">51</div>
<div class="line number52 index51 alt1" style="height:20px;">52</div>
<div class="line number53 index52 alt2" style="height:20px;">53</div>
<div class="line number54 index53 alt1" style="height:20px;">54</div>
<div class="line number55 index54 alt2" style="height:20px;">55</div>
<div class="line number56 index55 alt1" style="height:20px;">56</div>
<div class="line number57 index56 alt2" style="height:20px;">57</div>
<div class="line number58 index57 alt1" style="height:20px;">58</div>
<div class="line number59 index58 alt2" style="height:20px;">59</div>
<div class="line number60 index59 alt1" style="height:20px;">60</div>
<div class="line number61 index60 alt2" style="height:20px;">61</div>
<div class="line number62 index61 alt1" style="height:20px;">62</div>
<div class="line number63 index62 alt2" style="height:20px;">63</div>
<div class="line number64 index63 alt1" style="height:20px;">64</div>
<div class="line number65 index64 alt2" style="height:20px;">65</div>
<div class="line number66 index65 alt1" style="height:20px;">66</div>
<div class="line number67 index66 alt2" style="height:20px;">67</div>
<div class="line number68 index67 alt1" style="height:20px;">68</div>
<div class="line number69 index68 alt2" style="height:20px;">69</div>
<div class="line number70 index69 alt1" style="height:20px;">70</div>
<div class="line number71 index70 alt2" style="height:20px;">71</div>
<div class="line number72 index71 alt1" style="height:20px;">72</div>
<div class="line number73 index72 alt2" style="height:20px;">73</div>
<div class="line number74 index73 alt1" style="height:20px;">74</div>
<div class="line number75 index74 alt2" style="height:20px;">75</div>
<div class="line number76 index75 alt1" style="height:20px;">76</div>
<div class="line number77 index76 alt2" style="height:20px;">77</div>
<div class="line number78 index77 alt1" style="height:20px;">78</div>
<div class="line number79 index78 alt2" style="height:20px;">79</div>
<div class="line number80 index79 alt1" style="height:20px;">80</div>
<div class="line number81 index80 alt2" style="height:20px;">81</div>
<div class="line number82 index81 alt1" style="height:20px;">82</div>
<div class="line number83 index82 alt2" style="height:20px;">83</div>
<div class="line number84 index83 alt1" style="height:20px;">84</div>
<div class="line number85 index84 alt2" style="height:20px;">85</div>
<div class="line number86 index85 alt1" style="height:20px;">86</div>
<div class="line number87 index86 alt2" style="height:20px;">87</div>
<div class="line number88 index87 alt1" style="height:20px;">88</div>
<div class="line number89 index88 alt2" style="height:20px;">89</div>
<div class="line number90 index89 alt1" style="height:20px;">90</div>
<div class="line number91 index90 alt2" style="height:20px;">91</div>
<div class="line number92 index91 alt1" style="height:20px;">92</div>
<div class="line number93 index92 alt2" style="height:20px;">93</div>
<div class="line number94 index93 alt1" style="height:20px;">94</div>
</td>
<td class="code"><div class="container"><div class="line number1 index0 alt2" style="height:20px;"><code class="python comments">#!/usr/bin/python</code></div>
<div class="line number2 index1 alt1" style="height:20px;"><code class="python comments"># -*- coding: utf-8 -*-</code></div>
<div class="line number3 index2 alt2" style="height:20px;"><code class="python comments">'''</code></div>
<div class="line number4 index3 alt1" style="height:20px;"><code class="python comments"># heapsort of python</code></div>
<div class="line number5 index4 alt2" style="height:20px;"><code class="python comments"># by bibodeng</code></div>
<div class="line number6 index5 alt1" style="height:20px;"><code class="python comments"># 2013-04-21</code></div>
<div class="line number7 index6 alt2" style="height:20px;"><code class="python comments">'''</code></div>
<div class="line number8 index7 alt1" style="height:20px;"><code class="python plain">DEBUG</code><code class="python keyword">=</code><code class="python value">1</code></div>
<div class="line number9 index8 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number10 index9 alt1" style="height:20px;"><code class="python keyword">class</code>&nbsp;<code class="python plain">heap_sort:</code></div>
<div class="line number11 index10 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">array&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">#the array to be sort</code></div>
<div class="line number12 index11 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">heap_size&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python value">0</code></div>
<div class="line number13 index12 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number14 index13 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, array):</code></div>
<div class="line number15 index14 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.array&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">#the array to be sort</code></div>
<div class="line number16 index15 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.heap_size&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python functions">len</code><code class="python plain">(</code><code class="python color1">self</code><code class="python plain">.array)&nbsp;</code><code class="python keyword">-</code>&nbsp;<code class="python value">1</code></div>
<div class="line number17 index16 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">'''print self.array</code></div>
<div class="line number18 index17 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">print self.heap_size'''</code></div>
<div class="line number19 index18 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number20 index19 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># find the parent node index in array</code></div>
<div class="line number21 index20 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">parent(</code><code class="python color1">self</code><code class="python plain">,i):</code></div>
<div class="line number22 index21 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">i&gt;&gt;</code><code class="python value">1</code></div>
<div class="line number23 index22 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number24 index23 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">left_child(</code><code class="python color1">self</code><code class="python plain">,i):</code></div>
<div class="line number25 index24 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">(i&lt;&lt;</code><code class="python value">1</code><code class="python plain">)&nbsp;</code><code class="python keyword">+</code>&nbsp;<code class="python value">1</code></div>
<div class="line number26 index25 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number27 index26 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">right_child(</code><code class="python color1">self</code><code class="python plain">,i):</code></div>
<div class="line number28 index27 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">(i&lt;&lt;</code><code class="python value">1</code><code class="python plain">)&nbsp;</code><code class="python keyword">+</code>&nbsp;<code class="python value">2</code></div>
<div class="line number29 index28 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number30 index29 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">heap_max(</code><code class="python color1">self</code><code class="python plain">):</code></div>
<div class="line number31 index30 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python color1">self</code><code class="python plain">.array[</code><code class="python value">0</code><code class="python plain">]</code></div>
<div class="line number32 index31 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number33 index32 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">swap(</code><code class="python color1">self</code><code class="python plain">,x,y):</code></div>
<div class="line number34 index33 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">y,x</code></div>
<div class="line number35 index34 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number36 index35 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># make the array fit heap from node i</code></div>
<div class="line number37 index36 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">max_heapify(</code><code class="python color1">self</code><code class="python plain">, i):&nbsp;&nbsp;</code></div>
<div class="line number38 index37 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># judge the i is smaller than his child</code></div>
<div class="line number39 index38 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">l&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python color1">self</code><code class="python plain">.left_child(i)</code></div>
<div class="line number40 index39 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">r&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python color1">self</code><code class="python plain">.right_child(i)</code></div>
<div class="line number41 index40 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">largest&nbsp;&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">i</code></div>
<div class="line number42 index41 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># left</code></div>
<div class="line number43 index42 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code>&nbsp;<code class="python plain">l &lt;</code><code class="python keyword">=</code>&nbsp;<code class="python color1">self</code><code class="python plain">.heap_size&nbsp;</code><code class="python keyword">and</code>&nbsp;<code class="python plain">array[i] &lt; array[l]:</code></div>
<div class="line number44 index43 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">largest&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">l</code></div>
<div class="line number45 index44 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># right</code></div>
<div class="line number46 index45 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code>&nbsp;<code class="python plain">r &lt;</code><code class="python keyword">=</code>&nbsp;<code class="python color1">self</code><code class="python plain">.heap_size&nbsp;</code><code class="python keyword">and</code>&nbsp;<code class="python plain">array[largest] &lt; array[r] :</code></div>
<div class="line number47 index46 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">largest&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">r</code></div>
<div class="line number48 index47 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># exchange the largest with i</code></div>
<div class="line number49 index48 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code>&nbsp;<code class="python plain">largest !</code><code class="python keyword">=</code>&nbsp;<code class="python plain">i:</code></div>
<div class="line number50 index49 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">array[i],array[largest]&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python color1">self</code><code class="python plain">.swap(array[i], array[largest])</code></div>
<div class="line number51 index50 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># recur</code></div>
<div class="line number52 index51 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.max_heapify(largest)</code></div>
<div class="line number53 index52 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number54 index53 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number55 index54 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># make the array is a heap</code></div>
<div class="line number56 index55 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">build_heap(</code><code class="python color1">self</code><code class="python plain">):</code></div>
<div class="line number57 index56 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># self.heap_size = self.array.len()</code></div>
<div class="line number58 index57 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code>&nbsp;<code class="python plain">i&nbsp;</code><code class="python keyword">in</code>&nbsp;<code class="python functions">range</code><code class="python plain">((</code><code class="python color1">self</code><code class="python plain">.heap_size</code><code class="python keyword">/</code><code class="python value">2</code><code class="python plain">),&nbsp;</code><code class="python keyword">-</code><code class="python value">1</code><code class="python plain">,&nbsp;</code><code class="python keyword">-</code><code class="python value">1</code><code class="python plain">):</code></div>
<div class="line number59 index58 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># print "heapify node", i ,":", self.array[i]</code></div>
<div class="line number60 index59 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.max_heapify(i)</code></div>
<div class="line number61 index60 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number62 index61 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number63 index62 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code>&nbsp;<code class="python plain">h_sort(</code><code class="python color1">self</code><code class="python plain">):</code></div>
<div class="line number64 index63 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code>&nbsp;<code class="python string">"before build: "</code><code class="python plain">,</code><code class="python color1">self</code><code class="python plain">.array</code></div>
<div class="line number65 index64 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># first , build heap</code></div>
<div class="line number66 index65 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.build_heap()</code></div>
<div class="line number67 index66 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># second get the heap node by order</code></div>
<div class="line number68 index67 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># print self.heap_size</code></div>
<div class="line number69 index68 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code>&nbsp;<code class="python string">"after build: "</code><code class="python plain">,</code><code class="python color1">self</code><code class="python plain">.array</code></div>
<div class="line number70 index69 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code>&nbsp;<code class="python plain">i&nbsp;</code><code class="python keyword">in</code>&nbsp;<code class="python functions">range</code><code class="python plain">(</code><code class="python color1">self</code><code class="python plain">.heap_size,&nbsp;</code><code class="python keyword">-</code><code class="python value">1</code><code class="python plain">,&nbsp;</code><code class="python keyword">-</code><code class="python value">1</code><code class="python plain">):</code></div>
<div class="line number71 index70 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># get root</code></div>
<div class="line number72 index71 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">print</code>&nbsp;<code class="python string">"the "</code><code class="python plain">,i,</code><code class="python string">"num : "</code><code class="python plain">,&nbsp;</code><code class="python color1">self</code><code class="python plain">.heap_max()</code></div>
<div class="line number73 index72 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.array[</code><code class="python value">0</code><code class="python plain">]&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python color1">self</code><code class="python plain">.array[i]</code></div>
<div class="line number74 index73 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">del</code>&nbsp;<code class="python color1">self</code><code class="python plain">.array[i]</code></div>
<div class="line number75 index74 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.heap_size&nbsp;</code><code class="python keyword">-</code><code class="python keyword">=</code>&nbsp;<code class="python value">1</code></div>
<div class="line number76 index75 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># heapify the array</code></div>
<div class="line number77 index76 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.max_heapify(</code><code class="python value">0</code><code class="python plain">)</code></div>
<div class="line number78 index77 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number79 index78 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number80 index79 alt1" style="height:20px;"><code class="python comments"># call the program to run</code></div>
<div class="line number81 index80 alt2" style="height:20px;"><code class="python plain">array&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">[]</code></div>
<div class="line number82 index81 alt1" style="height:20px;"><code class="python keyword">if</code>&nbsp;<code class="python plain">DEBUG&nbsp;</code><code class="python keyword">=</code><code class="python keyword">=</code>&nbsp;<code class="python value">1</code><code class="python plain">:</code></div>
<div class="line number83 index82 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">array.extend([</code><code class="python value">3</code><code class="python plain">,</code><code class="python value">2</code><code class="python plain">,</code><code class="python value">5</code><code class="python plain">,</code><code class="python value">4</code><code class="python plain">,</code><code class="python value">6</code><code class="python plain">,</code><code class="python value">9</code><code class="python plain">,</code><code class="python value">1</code><code class="python plain">,</code><code class="python value">10</code><code class="python plain">,</code><code class="python value">20</code><code class="python plain">])</code></div>
<div class="line number84 index83 alt1" style="height:20px;"><code class="python keyword">else</code><code class="python plain">:</code></div>
<div class="line number85 index84 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">tmp&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python functions">int</code><code class="python plain">(</code><code class="python functions">raw_input</code><code class="python plain">(</code><code class="python string">"input one number :"</code><code class="python plain">))</code></div>
<div class="line number86 index85 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">while</code><code class="python plain">(tmp &gt;&nbsp;</code><code class="python value">0</code><code class="python plain">):</code></div>
<div class="line number87 index86 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">array.append(tmp);</code></div>
<div class="line number88 index87 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">tmp&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python functions">int</code><code class="python plain">(</code><code class="python functions">raw_input</code><code class="python plain">(</code><code class="python string">"input one number :"</code><code class="python plain">))</code></div>
<div class="line number89 index88 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number90 index89 alt1" style="height:20px;"><code class="python comments"># 正式验证程序功能&nbsp;</code></div>
<div class="line number91 index90 alt2" style="height:20px;"><code class="python plain">sort_example&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">heap_sort(array)</code></div>
<div class="line number92 index91 alt1" style="height:20px;"><code class="python plain">sort_example.h_sort()</code></div>
<div class="line number93 index92 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number94 index93 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';letter-spacing:1px;line-height:19.5px;">优先队列</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">在堆的基础上，添加了增长key功能，这样增长后的元素要遵守堆的规则，在合适的地方排队。故而需要自底向上地整堆，如果比父节点大，就一直交换。<span style="line-height:1.3em;">其实堆本身就已经具备了优先队列的功能了，增加功能会变得更加灵活，因为优先权可能是会改变的。</span></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">添加一个插入功能，其实是在最后添加一个无穷小的元素（这样就可以理所当然地排在最后），然后对它进行增长key，然后它的位置就改变了。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">by&nbsp;bibodeng&nbsp;&nbsp;2013-04-21&nbsp;21:54:21</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/04/20/不仅仅是优秀/" itemprop="url">
                  不仅仅是优秀
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-04-20T16:54:19+08:00" content="2013-04-20">
              2013-04-20
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/04/20/不仅仅是优秀/" class="leancloud_visitors" data-flag-title="不仅仅是优秀">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<div class="art_content" style="font-size:15px;letter-spacing:1px;line-height:1.3em;"><h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">受到的启发</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">要做就做到最好，做到exordinary，也就是杰出。做事情做到嘛嘛底，并不能引起别人的注意，也不能在人群中脱颖而出。而要做到很棒，才能让人记住你。上次在面试中，受到了一点点刺激，所以现在我又回到了“激情，勇气，火力全开”的状态。</p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">不仅仅是优秀</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">卓越，是优秀的人应该追求的境界。优秀，是啥都干的还好，不赖，但是离卓越还有那么一点距离。但是这个距离因为积累会越拉越远，并且人是处于一个熵增的状态，此时不干，将来想要成为卓越会更难了。卓越，是干的出色，漂亮，第一流的。可是，这需要很长时间的积累，以及正确的方法，正确的思想的指导。很有才干的人，最后的道德都不会差到哪里去。因为人生哲学和自然科学的目标都一样，使人的作用得以发挥，使物的作用得以发挥，从而实现人与物的价值。</p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">做事的方式与精神状态</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">做任何事情其实都是有技术的，包括与人维持感情，安排自己的生活，更加明显的就是编程这样需要训练的技能。既然是技术，而且有前人的不断努力得到的经验，那么我们就没有理由重新再来一遍。所以继承前人留下来的无穷的遗产，会使得我们成为一个“富人”。所以，要听取前贤们的意见和指导，注意是“贤”人的。所以对于修习学科来讲，找经典，读别人思考留下的精华，才是对我们最大的帮助。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">既然是技术，那就需要从改变认知开始（启发，打动你的思想），到改变行为（这就需要训练了）。当你达到了知行合一的时候，你基本上就所向无敌了，没有什么事情是你干不成的（只要不是异想天开的事情）。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">当然这样的求知的背后，是我们的一种态度。这种良好的向前贤看齐的心态，会不断鼓励你前进，去获取更加深奥的知识，从而获取更加大的力量。</p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">小结</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">《领悟》是最近很火的一首歌，但是我想说的不是感情上的领悟，而是知识上的领悟。有时侯，我们认知了一个事物，遇到了困难，苦思冥想，遇到高人指点了一下，或者是看到/听到其他东西启发了你一下，于是你顿悟了，理解畅通了，问题就解决了。记得我之前记下来的一句话“当你找到问题的本质时，问题就解决了”，这个世界上有许多的不可能，但是如果我们理解了我们所寻找的东西，那不断地找下去，总会找到问题的答案——我脑海中出现了二叉查找树的画面。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">by&nbsp;bibodeng&nbsp;&nbsp;&nbsp;&nbsp;2013-04-19&nbsp;&nbsp;&nbsp;21:09:18</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/04/20/C C++复仇记(下)/" itemprop="url">
                  C C++复仇记(下)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-04-20T16:45:42+08:00" content="2013-04-20">
              2013-04-20
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/04/20/C C++复仇记(下)/" class="leancloud_visitors" data-flag-title="C C++复仇记(下)">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';letter-spacing:1px;line-height:19.5px;"><br class="Apple-interchange-newline">
看好书</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">​自从上次写了《C/C++复仇记(下)》以来，我继续看《C语言深度剖析》，理解了几个之前不懂的知识点，例如指针数组，数组指针，函数指针（平时从来不用）等。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">我甚至觉得C语言是一门很难的语言，之前认为容易，是因为只接触了容易的部分，当然这是相对而言的（python，java等高级语言都没有指针啥的，而且内存管理也轻松很多）。但是C作为我们大学里面学习的第一门语言，也是面试，笔试，考试，竞赛等等最常用到的语言，没有理由不好好学习之。而学习它，更多的是语言实现细节，不仅仅是语法细节，而实现细节在语言上的反映就是编译器的做法，比如函数，比如一个malloc函数，理解了它的实现，就可以知道为什么申请后要进行转化成特定类型的指针（因为用到了void*指针类型）等等，这些都需要深入理解，甚至是动手调试。</p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';letter-spacing:1px;line-height:19.5px;">C的指针和数组</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">指针与数组的区别</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">书里面讲的很明白，数组和指针是完全不同的东西，相互之间也没有什么关联。只是它们的某些操作方法很相似，所以常常令我们迷惑。指针是一个地址，指向的是内存中的一块内存，它的类型只是表示它怎么解读内存里面的内容。如int *p = &amp;a[0]; 使得p指向数组的首元素的首地址，然后*(p+1)则表示下一个int型，是跨越了4个字节的（32位机）。当然也可以用下标的方式来访问： p[1]，其等价于 *（p+1），这就是迷惑我们的地方，因为数组也可以这样来访问。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<h4 style="font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">几个要说明的问题</h4>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">对指针进行加&nbsp;1&nbsp;操作,得到的是下一个元素的地址，而不是直接下一个字节的地址。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">假设有 int a[10] = {0};</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">数组名a作为右值：</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">int (*p)[10]&nbsp;= &amp;a; &nbsp; // 将整个数组的首地址赋予数组指针， +1解读为跳10个int类型大小。指针是按照类型来确定下一个元素的位置的。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">当 int *p = &amp;a;&nbsp;&nbsp; &nbsp; // 编译器将会警告，说类型转换，把数组地址赋给了int* p</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">当a作为右值时，和&amp;a[0]是一样的。也就是说可以这样用：</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">int x = *(a+1); &nbsp; &nbsp; &nbsp;// 表示数组的第二个元素赋值给x</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">区别指针数组和数组的指针：</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">A),int&nbsp;*p1[10];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 指针数组 int* p1[10] &nbsp;，[]的优先级比*高。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">B),int&nbsp;(*p2)[10];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; // 数组指针 int (*)[10] &nbsp;p2, 指向10个元素数组的一个指针</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">理解指针和数组，最重要的是理解，指针是一个地址，指向一片内存，怎么解读内存关键在于起始地址和指针类型。而数组则是作为一个整体存在的，可以访问数组内的单个元素，但是其本身可以作为一种类型，可以有指向这种类型的指针。</p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';letter-spacing:1px;line-height:19.5px;">一种意识</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">学习一种语言，到了一定的程度，应该养成了察觉错误的意识。错过一次后，找到犯错误的原因，也就不会错了。而往往我们犯错误，是因为我们的认知没有到位，没有搞清各个元素之间的关系。我们学习一样技能，总是克服原有的思维方法，重新确定其表达方式，归根结底都是一种映射，但是这种映射和我们潜意识中的内容可能有偏差，而阅读更多的知识，做更多的练习是减少这种偏差的唯一方法。加油！</p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';letter-spacing:1px;line-height:19.5px;">END</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';font-size:15px;letter-spacing:1px;line-height:19.5px;">by bibodeng&nbsp;2013-04-20&nbsp;16:44:12</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/04/19/微信公众开发——使用消息接口/" itemprop="url">
                  微信公众开发——使用消息接口
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-04-19T09:49:51+08:00" content="2013-04-19">
              2013-04-19
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/04/19/微信公众开发——使用消息接口/" class="leancloud_visitors" data-flag-title="微信公众开发——使用消息接口">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<div class="art_content" style="font-size:15px;letter-spacing:1px;line-height:1.3em;"><h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">﻿南苑随笔app</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">之前写了一篇搭建sae的python平台，通过微信公众平台验证的博文。现在就是要承上启下，开始开发的第一步。也许你会说开发的第一步就是写代码。那我会对你表示鄙视，尽管南苑随笔是个很简单的应用，但是多少也还需要设计一下。确定一下需求，为了将来能够吸引到粉丝来关注我的公众号，我必须要定位好我的app，然后提供优秀的内容，并确定它的运营模式，才能进一步地提升我们的应用水准。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">需求分析</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">首先，这个app是要用python写的，那么就一定要优雅一点，pythonic一点。对于我自己来说，我要使得这个app至少能够满足我阅读若干与南苑相关的文章的要求才行。故而需要对南苑随笔进行需求分析：</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';"><p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;">定位：&nbsp;为南苑或者外校同学提供我们在南苑生活和学习的文章。文体不限，内容形式包括{图片，语音，文字}，推送给用户，这正是微信能够提供给我的。</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;">约定：&nbsp;允许投稿，但是投稿必须通过管理员的审核。其实很大程度上，我们是为了向粉丝们推介&nbsp;@bibo-果冻&nbsp;和&nbsp;@daoluan-郑思愿&nbsp;合作的那本《南苑随笔——IT小小鸟外传》。</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;">内容：&nbsp;校园生活，学习，感情，分享，趣味，摄影，文学作品，简单社交&nbsp;，歌曲等等。</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;">服务：&nbsp;提供每1天/2天定期推送文章或语音。同时相应用户发来的请求，对用户请求进行分析后返回所要求的内容。</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
<p style="margin-top:0px;margin-bottom:0px;">性能：&nbsp;要求服务器在5秒内返回用户的请求内容，在网络差的时候，这个就难说了。能够同时处理至少20位粉丝的请求（其实到底有没有这么多粉丝发来请求，我心里还是没有数啊）。</p>
</blockquote>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">系统设计</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">这次，我吸取了上次的经验教训，要先完成逻辑和数据的设计，最后才去设计我们的交互界面（包括交互方式和菜单）。数据先行，那么一切就从构建起数据库开始。参照wordpress的博客数据库，就可以设计出基本的数据库框架。这部分就交给&nbsp;@daoluan-思愿&nbsp;来搞定，我相信他会完成的相当出色。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">本系统需要一个博客系统，和一个微信服务app,博客系统作为web端，用浏览器可访问的。而微信app则负责推送到用户的微信帐号聊天界面。故而我们的数据库设计就很清晰了，需要:</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';"><p style="margin-top:0px;margin-bottom:0px;">user表——用户</p>
<p style="margin-top:0px;margin-bottom:0px;">post表——文章</p>
<p style="margin-top:0px;margin-bottom:0px;">blog配置——博客的设置</p>
<p style="margin-top:0px;margin-bottom:0px;">category表——分类</p>
<p style="margin-top:0px;margin-bottom:0px;">———————————次要———————————</p>
<p style="margin-top:0px;margin-bottom:0px;">url表——友情链接</p>
<p style="margin-top:0px;margin-bottom:0px;">guest_book表——留言簿</p>
<p style="margin-top:0px;margin-bottom:0px;"></p>
</blockquote>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">而我需要用到的仅仅是博客系统数据库的一个子集——post表和guest_book表（也许会用到category表）。故而开发微信app则只需要自行创建两个表进行实验即可。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">发送消息试验</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">暂且不把设计逻辑排到日程上来，我们来尝试一下在第三方服务器和微信服务器，以及客户端进行通信。假如用户发送来一个请求，由于已经绑定了URL，且开启了开发模式，那么就微信服务器就会转发这个请求到我们的服务器，我们的服务器要解析这个请求，然后返回所请求的内容。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">我们需要一个类来处理get请求，以及定时向微信服务器传送群发的文章。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">该类&nbsp;weixin_scnuwriter设计如下：</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';"><p style="margin-top:0px;margin-bottom:0px;">handle_request(request)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;处理请求</p>
<p style="margin-top:0px;margin-bottom:0px;">parse_request_xml(xml)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;解析请求</p>
<p style="margin-top:0px;margin-bottom:0px;">response_msg(request)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;响应请求（关键逻辑部分）</p>
<p style="margin-top:0px;margin-bottom:0px;">pack_text_xml(post_msg,&nbsp;response_msg)&nbsp;&nbsp;#&nbsp;打包响应的文本内容，需要参考微信API，供response_msg调用</p>
</blockquote>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">#&nbsp;另外在数据库方面要能够读取，需要django于数据库打交道，不过我们暂时不实现，只是做一个简单的测试。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">下面是handle_request代码：</p>
<div id="highlighter_8251" class="syntaxhighlighter python" highlighter="brush:python;toolbar:false;" style="font-family:'Times New Roman';"><table border="0" cellpadding="0" cellspacing="0" style="clear:both;margin-bottom:10px;word-break:break-all;"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
</td>
<td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code>&nbsp;<code class="python plain">handle_request(request):&nbsp;</code></div>
<div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code>&nbsp;<code class="python plain">request.method&nbsp;</code><code class="python keyword">=</code><code class="python keyword">=</code>&nbsp;<code class="python string">'GET'</code><code class="python plain">:&nbsp;</code></div>
<div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">response&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">HttpResponse(check_signature(request),content_type</code><code class="python keyword">=</code><code class="python string">"text/plain"</code><code class="python plain">)&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 如果是GET请求，那么核对签名</code></div>
<div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">response</code></div>
<div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">elif</code>&nbsp;<code class="python plain">request.method&nbsp;</code><code class="python keyword">=</code><code class="python keyword">=</code>&nbsp;<code class="python string">'POST'</code><code class="python plain">:&nbsp;&nbsp;</code></div>
<div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">response&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">HttpResponse(response_msg(request),content_type</code><code class="python keyword">=</code><code class="python string">"application/xml"</code><code class="python plain">)&nbsp;&nbsp;</code><code class="python comments"># 如果是POST请求，那么响应消息</code></div>
<div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">response&nbsp;</code></div>
<div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">else</code><code class="python plain">:&nbsp;</code></div>
<div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python color1">None</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">我们之前写认证的时候，都是直接将url导向到check_signature直接进行响应处理，但是这里我们对请求的类型进行区分，因为验证的时候发送的是GET请求，而对我们自己的服务器推送消息的时候，它是使用POST请求的，因为POST方法可以向服务器发送大量的数据（表单提交，文件上传等），在这里是xml结构。记得要在urls里面配置一个到handle_request的映射，我的是：“&nbsp;url(r'^$',&nbsp;handle_request), &nbsp;”。逗号是不能丢的。​</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">handle_request需要调用check_signature,之前我们用了return&nbsp;HttpResponse(echoStr)来验证，但是我们把HttpResponse的封装放到了handle_request中，那么我们就只需在check_signature中返回echoStr就行了，当然，验证一次就行了，现在已经进入开发阶段，这函数将用不到。其实应该在一开始，我们就应该像现在一样写。check_signature如下：</p>
<div id="highlighter_837610" class="syntaxhighlighter python" highlighter="brush:python;toolbar:false;" style="font-family:'Times New Roman';"><table border="0" cellpadding="0" cellspacing="0" style="clear:both;margin-bottom:10px;word-break:break-all;"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
</td>
<td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments"># 检测签名,只对get有效&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></div>
<div class="line number2 index1 alt1"><code class="python keyword">def</code>&nbsp;<code class="python plain">check_signature(request):&nbsp;</code></div>
<div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">global</code>&nbsp;<code class="python plain">TOKEN&nbsp;</code></div>
<div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">signature&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">request.GET.get(</code><code class="python string">"signature"</code><code class="python plain">,&nbsp;</code><code class="python color1">None</code><code class="python plain">)</code></div>
<div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">timestamp&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">request.GET.get(</code><code class="python string">"timestamp"</code><code class="python plain">,&nbsp;</code><code class="python color1">None</code><code class="python plain">)</code></div>
<div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">nonce&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">request.GET.get(</code><code class="python string">"nonce"</code><code class="python plain">,&nbsp;</code><code class="python color1">None</code><code class="python plain">)</code></div>
<div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">echoStr&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">request.GET.get(</code><code class="python string">"echostr"</code><code class="python plain">,</code><code class="python color1">None</code><code class="python plain">)</code></div>
<div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">token&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">TOKEN&nbsp;</code></div>
<div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">tmpList&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">[token,timestamp,nonce]&nbsp;</code></div>
<div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">tmpList.sort()&nbsp;</code></div>
<div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">tmpstr&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python string">"%s%s%s"</code>&nbsp;<code class="python keyword">%</code>&nbsp;<code class="python functions">tuple</code><code class="python plain">(tmpList)&nbsp;</code></div>
<div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">tmpstr&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">hashlib.sha1(tmpstr).hexdigest()</code></div>
<div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code>&nbsp;<code class="python plain">tmpstr&nbsp;</code><code class="python keyword">=</code><code class="python keyword">=</code>&nbsp;<code class="python plain">signature:</code></div>
<div class="line number15 index14 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">echoStr</code></div>
<div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">else</code><code class="python plain">:&nbsp;</code></div>
<div class="line number17 index16 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python color1">None</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">很明显15行变了。浏览器和服务器之间，并不是简单的传递数据，还有解析包的过程，服务器返回一个http类型的文档，浏览器要进行协议解析，读取头部等东西，进而解析出整个文档。这就是为什么需要在返回的时候包装成HttpResponse，否则浏览器读不懂，django就报错说：返回的不是一个httpresponse类型的对象。我曾经参考《linux&nbsp;C&nbsp;编程指南》写过一个简单的服务器程序，服务器程序，发送了固定的头部，然后对各种不同类型的返回打印不同的文档，例如404，503等等，而对于正常情况，则读取一个html文件予以返回。协议与就是相互商量好的约定，故而协议一般都约定了要以什么开头，或者按照协议里写的东西来解析。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">下面是parse_request_xml函数，用来解析请求，该请求来自微信服务器，包含了一个xml结构，使用的是POST方法，待会我们就用个工具来测试一下怎么模拟POST请求，而不使用微信发送（微信发送需要经过微信服务器，而且我们不知道错在哪里）。</p>
<div id="highlighter_242112" class="syntaxhighlighter python" highlighter="brush:python;toolbar:false;" style="font-family:'Times New Roman';"><table border="0" cellpadding="0" cellspacing="0" style="clear:both;margin-bottom:10px;word-break:break-all;"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
</td>
<td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments"># 解析请求,拆解到一个字典里&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></div>
<div class="line number2 index1 alt1"><code class="python keyword">def</code>&nbsp;<code class="python plain">parse_request_xml(rootElem):</code></div>
<div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">msg&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">{}</code></div>
<div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code>&nbsp;<code class="python plain">rootElem.tag&nbsp;</code><code class="python keyword">=</code><code class="python keyword">=</code>&nbsp;<code class="python string">'xml'</code><code class="python plain">:</code></div>
<div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code>&nbsp;<code class="python plain">child&nbsp;</code><code class="python keyword">in</code>&nbsp;<code class="python plain">rootElem:</code></div>
<div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">msg[child.tag]&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">smart_str(child.text)&nbsp;&nbsp;</code><code class="python comments"># 获得内容&nbsp;</code></div>
<div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">msg</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">很明显，对于一个xml结构（其实是一个字符串），进行解析，就需要用到它的tag，来区分到底是什么内容，以及获取对应tag的内容，放到python我们程序中的一个字典结构里。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">下面是response_msg函数：</p>
<div id="highlighter_564878" class="syntaxhighlighter python" highlighter="brush:python;toolbar:false;" style="font-family:'Times New Roman';"><table border="0" cellpadding="0" cellspacing="0" style="clear:both;margin-bottom:10px;word-break:break-all;"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
</td>
<td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code>&nbsp;<code class="python plain">response_msg(request):</code></div>
<div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 从request中获取输入文本</code></div>
<div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">rawStr&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">smart_str(request.raw_post_data)</code></div>
<div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 将文本进行解析,得到请求的数据</code></div>
<div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">msg&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">parse_request_xml(ET.fromstring(rawStr))</code></div>
<div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 根据请求消息来处理内容返回</code></div>
<div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">query_str&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">msg.get(</code><code class="python string">"Content"</code><code class="python plain">)</code></div>
<div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># query_str = "hello"</code></div>
<div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">response_msg&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">""</code></div>
<div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 使用简单的处理逻辑，有待扩展</code></div>
<div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code>&nbsp;<code class="python plain">query_str&nbsp;</code><code class="python keyword">=</code><code class="python keyword">=</code>&nbsp;<code class="python string">"hello"</code><code class="python plain">:</code></div>
<div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">response_msg&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python string">"hello to you too"</code></div>
<div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">else</code><code class="python plain">:</code></div>
<div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">response_msg&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python string">"how are you, unkown"</code></div>
<div class="line number15 index14 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 返回消息</code></div>
<div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 包括post_msg，和对应的 response_msg</code></div>
<div class="line number17 index16 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">pack_text_xml(msg, response_msg);</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">消息回应，这里的逻辑很简单，对于hello，就返回一个hello&nbsp;to&nbsp;you&nbsp;too,&nbsp;其他则返回&nbsp;how&nbsp;are&nbsp;you&nbsp;,&nbsp;unkown。将来用户如果发来“第一篇”等请求，我们将返回完整的图文消息。这部分是有待开发的。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">上面的回应函数用到了打包返回消息成xml这样的功能，pack_text_xml函数如下：</p>
<div id="highlighter_790104" class="syntaxhighlighter python" highlighter="brush:python;toolbar:false;" style="font-family:'Times New Roman';"><table border="0" cellpadding="0" cellspacing="0" style="clear:both;margin-bottom:10px;word-break:break-all;"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
</td>
<td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments"># 打包消息xml，作为返回&nbsp;</code></div>
<div class="line number2 index1 alt1"><code class="python keyword">def</code>&nbsp;<code class="python plain">pack_text_xml(post_msg,response_msg):</code></div>
<div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># f = post_msg['FromUserName']</code></div>
<div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># t = post_msg['FromUserName']</code></div>
<div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">text_tpl&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python comments">'''&lt;xml&gt;</code></div>
<div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">&lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;</code></div>
<div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">&lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;</code></div>
<div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">&lt;CreateTime&gt;%s&lt;/CreateTime&gt;</code></div>
<div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">&lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;</code></div>
<div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">&lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;</code></div>
<div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">&lt;FuncFlag&gt;0&lt;/FuncFlag&gt;</code></div>
<div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">&lt;/xml&gt;'''</code></div>
<div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">text_tpl&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">text_tpl&nbsp;</code><code class="python keyword">%</code>&nbsp;<code class="python plain">(post_msg[</code><code class="python string">'FromUserName'</code><code class="python plain">],post_msg[</code><code class="python string">'ToUserName'</code><code class="python plain">],</code><code class="python functions">str</code><code class="python plain">(</code><code class="python functions">int</code><code class="python plain">(time.time())),</code><code class="python string">'text'</code><code class="python plain">,response_msg)</code></div>
<div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 调换发送者和接收者，然后填入需要返回的信息到xml中</code></div>
<div class="line number15 index14 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code>&nbsp;<code class="python plain">text_tpl</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">可以看到text_tpl其实就是微信API内容的一个——返回text，就是聊天记录一样的文本。对于其它内容，有其他内容的模板，可以到微信公众帐号API察看。这里需要说明的是xml结构里面要填参数的地方，都有一个占位符号%s，表示的是一个字符串。然后对于模板，填如我们的参数。如第12行所示。</p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">poster测试</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">&nbsp;&nbsp;好了，我们可以开始测试了。我google了一下，有人说使用firefox的poster插件，非常好用。于是我就在firefox下装了一个，来模拟各种各样不同的http请求。首先，要有一个firefox浏览器，ubuntu现在是自带了，无需安装，如果没有可以去官网下载。然后安装poster，点<a href="https://addons.mozilla.org/zh-cn/firefox/addon/poster/" target="_blank" data_ue_src="https://addons.mozilla.org/zh-cn/firefox/addon/poster/">这里</a>，找到了poster插件，在firefox安装就行了。好了，我们可以模拟微信服务器发送我们的消息转发了，如下：</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"><img src="http://www.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/27231758-ce5a-a853-c1b3-a2a1022fd49f.5886/index_files/8e8315b488a6fdb9c65b6f500d40fc4e.png" data_ue_src="http://www.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/27231758-ce5a-a853-c1b3-a2a1022fd49f.5886/index_files/8e8315b488a6fdb9c65b6f500d40fc4e.png"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">使用时，填入post请求时发送的xml,还有你的服务器的url，例如我的是:&nbsp;<a href="http://scnuwriter.sinaapp.com/" target="_blank" data_ue_src="http://scnuwriter.sinaapp.com">http://scnuwriter.sinaapp.com</a>&nbsp;然后点post，就可以看到下面的画面：</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"><img src="http://www.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/27231758-ce5a-a853-c1b3-a2a1022fd49f.5886/index_files/9e9f707207e852913050ad5c32939048.png" data_ue_src="http://www.wiz.cn/unzip/3eb90c0e-f584-11e0-a072-00237def97cc/27231758-ce5a-a853-c1b3-a2a1022fd49f.5886/index_files/9e9f707207e852913050ad5c32939048.png"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">可以看到我们的服务器返回了&nbsp;hello&nbsp;to&nbsp;you&nbsp;too,这是和我们的程序相符合的。但是可能你得到的是一个403fobidden。我google了一下，stack&nbsp;overflow里面说，那可能是因为我们没有启用跨站请求，以防止攻击，具体参考python的csrf文档。后来我修改了settings.py文件里面的middleware配置：</p>
<div id="highlighter_791285" class="syntaxhighlighter python" highlighter="brush:python;toolbar:false;" style="font-family:'Times New Roman';"><table border="0" cellpadding="0" cellspacing="0" style="clear:both;margin-bottom:10px;word-break:break-all;"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2" style="height:20px;">1</div>
<div class="line number2 index1 alt1" style="height:20px;">2</div>
<div class="line number3 index2 alt2" style="height:20px;">3</div>
<div class="line number4 index3 alt1" style="height:20px;">4</div>
<div class="line number5 index4 alt2" style="height:20px;">5</div>
<div class="line number6 index5 alt1" style="height:20px;">6</div>
<div class="line number7 index6 alt2" style="height:20px;">7</div>
<div class="line number8 index7 alt1" style="height:20px;">8</div>
<div class="line number9 index8 alt2" style="height:20px;">9</div>
<div class="line number10 index9 alt1" style="height:20px;">10</div>
<div class="line number11 index10 alt2" style="height:20px;">11</div>
<div class="line number12 index11 alt1" style="height:20px;">12</div>
</td>
<td class="code"><div class="container"><div class="line number1 index0 alt2" style="height:20px;"><code class="python plain">MIDDLEWARE_CLASSES&nbsp;</code><code class="python keyword">=</code>&nbsp;<code class="python plain">(</code></div>
<div class="line number2 index1 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'django.middleware.common.CommonMiddleware'</code><code class="python plain">,</code></div>
<div class="line number3 index2 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'django.contrib.sessions.middleware.SessionMiddleware'</code><code class="python plain">,</code></div>
<div class="line number4 index3 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'django.middleware.csrf.CsrfViewMiddleware'</code><code class="python plain">,</code></div>
<div class="line number5 index4 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'django.contrib.auth.middleware.AuthenticationMiddleware'</code><code class="python plain">,</code></div>
<div class="line number6 index5 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'django.contrib.messages.middleware.MessageMiddleware'</code><code class="python plain">,</code></div>
<div class="line number7 index6 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># for post:</code></div>
<div class="line number8 index7 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">#'django.middleware.csrf.CsrfResponseMiddleware',&nbsp;&nbsp;&nbsp;&nbsp;</code></div>
<div class="line number9 index8 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div>
<div class="line number10 index9 alt1" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># Uncomment the next line for simple clickjacking protection:</code></div>
<div class="line number11 index10 alt2" style="height:20px;"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments">#'django.middleware.clickjacking.XFrameOptionsMiddleware',</code></div>
<div class="line number12 index11 alt1" style="height:20px;"><code class="python plain">)</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">很奇怪，我去掉第8行CsrfResponseMiddleware之后，服务器就出错了。故而我注释了它，然后在views.py的最前面的函数前面加上一个：@csrf_exempt&nbsp;&nbsp;。结果就行了，得到上面截图的内容。要深入了解这是为什么，还需要了解web的更多信息，还有django的官方文档，bibo也要好好充电了，知其然，不知其所以然，不可谓为知也。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">最后</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">好吧，用svn上传你的成果到服务器上吧，用手机来测试。一般用post得到了正确回应都不会有错的。bibo在自己的手机微信上面发送了一个"hello"，真的收到了一个"hello&nbsp;to&nbsp;you&nbsp;too"。第一次尝试微信编程，居然成功了！yeah。而且还学会了一个工具poster。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">by&nbsp;bibodeng&nbsp;2013-04-19&nbsp;&nbsp;&nbsp;士别三日，当刮目相看</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">scnuwriter示例下载链接：<a href="http://vdisk.weibo.com/s/y9wJz" data_ue_src="http://vdisk.weibo.com/s/y9wJz" target="_blank" rel="noopener">http://vdisk.weibo.com/s/y9wJz</a>&nbsp; 主要看views.py</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/04/18/第一次面试/" itemprop="url">
                  第一次面试
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-04-18T20:07:17+08:00" content="2013-04-18">
              2013-04-18
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2013/04/18/第一次面试/" class="leancloud_visitors" data-flag-title="第一次面试">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<div class="art_content" style="font-size:15px;letter-spacing:1px;line-height:1.3em;"><h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">考验你</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">笔试的时候，觉得自己很可能被刷了。等到大多数人都有拿到了面试通知的时候，我发现我没有。然后心里有点焦急，然后和师兄聊了，说后悔搞了很多其他的锦上添花（项目和其他自学技术）而不是雪中送炭的东西（基础知识）。然后慢慢安下心来，做《南苑随笔》的微信app。然后，就意外地收到了通知，那就去试试吧。@daoluan&nbsp;兄没有收到，这不科学，肯定是上帝在考验我们。在等待中我这样写道：</p>
<blockquote style="background-color:#ccff99;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';"><p style="margin-top:0px;margin-bottom:0px;">即使偶然失败了，也不要灰心，因为这是老天爷在考验我，我还有些地方不够好，所以他叫我回去好好练，下次再来。</p>
</blockquote>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">准备</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">为了有个良好的表现，必须在物质上和精神上有准备。就思想上，我让自己淡定一点，但是面试技巧和技术上我做了如下准备：</p>
<h4 style="font-family:'Times New Roman';">1&nbsp;&nbsp;准备一身精神的行头，轻装上阵</h4>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">我借了一条皮带，穿上我只穿过两次的衬衫，觉得今天算整洁了，足以表达对面试官的尊重。</p>
<h4 style="font-family:'Times New Roman';">2&nbsp;&nbsp;准备好闹钟提醒</h4>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">由于在坑爹的南海，故而需要很早就开始搭车到广州，然后搭地铁到面试地点。十点半左右开始，那么我需要6点半起床出发，经过2个钟头的275路车程，再经过1个多钟头的地铁，10点多应该就能到达了。保险起见，还是6点就开拔吧，这样好歹都能在车上睡一下。</p>
<h4 style="font-family:'Times New Roman';">3&nbsp;&nbsp;个人简介和礼仪</h4>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">准备好个人简介发言，对面试官有里面。面试官您好，我是来自华南师范大学的bibodeng，我热爱编程，系统学习过C/C++&nbsp;，操作系统，算法与数据结构等课程，在校成绩还行，且积极参加科研立项，自学python与php，有web开发经验，有自己的独立博客。欢迎面试官对我提问。</p>
<h4 style="font-family:'Times New Roman';">4&nbsp;&nbsp;准备应对简历上的问题</h4>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">对于我熟悉的技术，以及基础的知识，我要准备好应对面试官的提问。例如，面试官如果问关于linux的知识，我肯定要回答了解一点，如果他深入地询问那些管理命令。同时跟他聊聊关于自己动手解决问题，例如编写&nbsp;语音报时脚本，编写博客的css模版（一次编写，处处应用，所以你现在看到的颜色搭配的标题和blockquote都是来自于一个短短的css脚本），运用python解决euler的趣题，难题。</p>
<h4 style="font-family:'Times New Roman';">5&nbsp;&nbsp;复习基础的算法——排序，二分查找，深度遍历，广度遍历等</h4>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">对于排序，最有可能考的是冒泡和快速排序，快速排序《编程珠玑》上面有，所以我需要平静下来，循着思路来写。遇到有思路的时候，就跟面试官互动一下，要点提示。如果不小心沉默了一下，有间隔，不妨多沉默一下，反而会让人觉得你沉着冷静，且能够深思熟虑，办事靠谱。这些都是从别人的面经上得来的经验方法。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">好了，有了这些准备，就拜托给我一个好运气吧。。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">面试ing</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;终于到了面试了，从学校早上6点多搭车到了面试的酒店，足足用了3个多钟。稍微有点紧张，走进去，考官叫我坐下，然后等他问我，简单做了个自我介绍。面试官就开始问各种问题了，包括web开发的一些很基础的原理，可惜我说的都很不明白，往往没有戳中要点。譬如ajax的作用的原理是什么，我答不出来，于是他给我提示，说是能改变DOM的内容，然后我恍然大悟。就是那么坑爹，我原先准备好的数据结构和算法，居然一个都不问，感觉最后面试官认为我很水，不适合在这个岗位工作。啊！！怎么可以这样，我继续很淡定地和他谈对于学习要有深入性的观点，就此双方交换了意见，结果很明白，我太水了~&nbsp;不过我很希望面试官能够再给我一点机会，因为他真的很nice，貌似也很委婉了表达了他们追求卓越的精神。而且给我看了笔试的成绩，惨不忍睹。好啦，面试的过程就不细讲了，问了下其他的同学，都说考了数据结构等。这次的经验教训就是“仅仅是有东西是不行的，而且要有深入的东西”。坐车回来的路上，我一直在想，面试怎么会这么刷人的，40选1都有，看来大家要视自己的实力来选择部门，实力不够雄厚的就报技术含量低的，像weixin这样的牛逼团队，需要的都是牛人。看来得再修炼半年，都说“士别三日当刮目相看”，有时侯上帝降给我失败，是认为我不够好，需要继续修炼。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;战略调整：对于自己感兴趣的方向，大公司要求的是你“基础扎实，钻研深厚”。今天下午跟华师毕业的在华工攻读研究生的@嘉其&nbsp;师兄聊了一些近况，和当年他们的笔试面试情况。他说，当年，进了笔试的就只有4个，而面试又刷了2个，他是其中之一。看来技术面还真的会很惨烈啊，问你一些深入的知识就挂不住了。所以，底气是由实力决定的。牛逼程度够高了，他就录了你。又应了之前说的一句话：“有其能者当其事”。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<h3 style="background-color:#000000;color:#ffffff;padding:10px;font-family:'Times New Roman';">小结</h3>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;虽然能过笔试，但是面试还是底气不够。在bibo写这篇的时候结果还没有出来，所以要等通知。TenC’这样的公司，如果招的人少，要进去是很难的，除非真的有点料。不过，我听说华工的同学都是把它当作保底的offer，诧异中。。当然这是不是事实，还有待考证。这次最大的收获就是，为了应对你的面试，你绝对需要找出你最熟悉的部分来对答，还要真正在学习中，有自己的专攻，优秀是不够的，要做到卓越，exordinary.</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';">by&nbsp;bibodeng&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2013-04-18</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:'Times New Roman';"></p>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/bitcoin-cash-logo.svg"
               alt="bibodeng" />
          <p class="site-author-name" itemprop="name">bibodeng</p>
          <p class="site-description motion-element" itemprop="description">区块链爱好者，互联网从业者</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">189</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/bibodeng" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/bibodeng" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/bibodeng" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://ifwallet.com" title="IFWallet" target="_blank">IFWallet</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://ifpass.cash" title="IFPassword" target="_blank">IFPassword</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bibodeng</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("RrMSWOa8nuCnCCWn8TyPa7Od-gzGzoHsz", "8xnzit83sqv6vUEuXlsEWe0s");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
